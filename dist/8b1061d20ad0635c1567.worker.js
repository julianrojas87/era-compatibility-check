!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=79)}([function(t,e,r){"use strict";var n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#",s="http://www.w3.org/2000/10/swap/";e.a={xsd:{decimal:i+"decimal",boolean:i+"boolean",double:i+"double",integer:i+"integer",string:i+"string"},rdf:{type:n+"type",nil:n+"nil",first:n+"first",rest:n+"rest",langString:n+"langString"},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:s+"reify#forSome",forAll:s+"reify#forAll"},log:{implies:s+"log#implies"}}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(22)),n(r(8)),n(r(24)),n(r(26)),n(r(15))},function(t,e,r){"use strict";var n=r(11),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=c;var s=Object.create(r(9));s.inherits=r(6);var a=r(28),o=r(18);s.inherits(c,a);for(var u=i(o.prototype),l=0;l<u.length;l++){var h=u[l];c.prototype[h]||(c.prototype[h]=o.prototype[h])}function c(t){if(!(this instanceof c))return new c(t);a.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(33),s=r(27);class a{constructor(t){this.parsingContext=t.parsingContext,this.dataFactory=t.dataFactory||r(34),this.rdfFirst=this.dataFactory.namedNode(a.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(a.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(a.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(a.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(a.RDF+"JSON")}static getContextValue(t,e,r,n){const i=t.getContextRaw()[r];if(!i)return n;const s=i[e];return void 0===s?n:s}static getContextValueContainer(t,e){return a.getContextValue(t,"@container",e,{"@set":!0})}static getContextValueType(t,e){const r=a.getContextValue(t,"@type",e,null);return"@none"===r?null:r}static getContextValueLanguage(t,e){return a.getContextValue(t,"@language",e,t.getContextRaw()["@language"]||null)}static getContextValueDirection(t,e){return a.getContextValue(t,"@direction",e,t.getContextRaw()["@direction"]||null)}static isContextValueReverse(t,e){return!!a.getContextValue(t,"@reverse",e,null)}static getContextValueIndex(t,e){return a.getContextValue(t,"@index",e,t.getContextRaw()["@index"]||null)}static isPropertyReverse(t,e,r){return"@reverse"===r!==a.isContextValueReverse(t,e)}static isValidIri(t){return null!==t&&n.Util.isValidIri(t)}static isPrefixArray(t,e){if(t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}async validateValueIndexes(t){if(this.parsingContext.validateValueIndexes){const e={};for(const r of t)if(r&&"object"==typeof r){const t=r["@id"],i=r["@index"];if(t&&i){const r=e[t];if(r&&r!==i)throw new n.ErrorCoded("Conflicting @index value for "+t,n.ERROR_CODES.CONFLICTING_INDEXES);e[t]=i}}}}async valueToTerm(t,e,r,i,s){if("@json"===a.getContextValueType(t,e))return[this.dataFactory.literal(this.valueToJsonString(r),this.rdfJson)];const o=typeof r;switch(o){case"object":if(null==r)return[];if(Array.isArray(r))return"@list"in a.getContextValueContainer(t,e)?0===r.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:(await this.validateValueIndexes(r),[]);if(t=await this.getContextSelfOrPropertyScoped(t,e),"@context"in r&&(t=await this.parsingContext.parseContext(r["@context"],(await this.parsingContext.getContext(s,0)).getContextRaw())),"@value"in(r=await this.unaliasKeywords(r,s,i,t))){let a,o,u,l,h;for(e in r){const t=r[e];switch(e){case"@value":a=t;break;case"@language":o=t;break;case"@direction":u=t;break;case"@type":l=t;break;case"@index":h=t;break;default:throw new n.ErrorCoded(`Unknown value entry '${e}' in @value: ${JSON.stringify(r)}`,n.ERROR_CODES.INVALID_VALUE_OBJECT)}}if("@json"===await this.unaliasKeyword(l,s,i,!0,t))return[this.dataFactory.literal(this.valueToJsonString(a),this.rdfJson)];if(null===a)return[];if("object"==typeof a)throw new n.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&h&&"string"!=typeof h)throw new n.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(h)}'`,n.ERROR_CODES.INVALID_INDEX_VALUE);if(o){if("string"!=typeof a)throw new n.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!n.ContextParser.validateLanguage(o,this.parsingContext.strictValues,n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||1===this.parsingContext.activeProcessingMode)&&(o=o.toLowerCase())}if(u){if("string"!=typeof a)throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(a)}'`);if(!n.ContextParser.validateDirection(u,this.parsingContext.strictValues))return[]}if(o&&u&&this.parsingContext.rdfDirection){if(l)throw new n.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,a,o,u))}if(o){if(l)throw new n.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(a,o)]}if(u&&this.parsingContext.rdfDirection){if(l)throw new n.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,a,o,u))}if(l){if("string"!=typeof l)throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPED_VALUE);const e=this.createVocabOrBaseTerm(t,l);if(!e)throw new n.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPED_VALUE);if("NamedNode"!==e.termType)throw new n.ErrorCoded(`Illegal value type (${e.termType}): ${l}`,n.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(a,e)]}return await this.valueToTerm(new n.JsonLdContextNormalized({}),e,a,i,s)}if("@set"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${e}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}if("@list"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${e}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const t=r["@list"];return Array.isArray(t)?0===t.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(s),e,t,i-1,s.slice(0,-1))}if("@reverse"in r)return[];if("@graph"in a.getContextValueContainer(await this.parsingContext.getContext(s),e)){const t=this.parsingContext.graphContainerTermStack[i+1];return t?Object.values(t):[this.dataFactory.blankNode()]}return"@id"in r?(Object.keys(r).length>1&&(t=await this.parsingContext.getContext(s,0)),"@context"in r&&(t=await this.parsingContext.parseContext(r["@context"],t.getContextRaw())),"@vocab"===r["@type"]?this.nullableTermToArray(this.createVocabOrBaseTerm(t,r["@id"])):this.nullableTermToArray(this.resourceToTerm(t,r["@id"]))):this.parsingContext.emittedStack[i+1]?this.parsingContext.idStack[i+1]||(this.parsingContext.idStack[i+1]=[this.dataFactory.blankNode()]):[];case"string":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(t,e),e,r,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(t,e),e,Boolean(r).toString(),this.dataFactory.namedNode(a.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(t,e),e,r,this.dataFactory.namedNode(r%1==0&&r<1e21?a.XSD_INTEGER:a.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error("Could not determine the RDF type of a "+o)),[]}}async getContextSelfOrPropertyScoped(t,e){const r=t.getContextRaw()[e];return r&&"object"==typeof r&&"@context"in r&&(t=await this.parsingContext.parseContext(r,t.getContextRaw(),!0)),t}nullableTermToArray(t){return t?[t]:[]}predicateToTerm(t,e){const r=t.expandTerm(e,!0,this.parsingContext.getExpandOptions());return r?"_"===r[0]&&":"===r[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(r.substr(2)):null:a.isValidIri(r)?this.dataFactory.namedNode(r):r&&this.parsingContext.strictValues?(this.parsingContext.emitError(new n.ErrorCoded("Invalid predicate IRI: "+r,n.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null}resourceToTerm(t,e){if(e.startsWith("_:"))return this.dataFactory.blankNode(e.substr(2));const r=t.expandTerm(e,!1,this.parsingContext.getExpandOptions());if(!a.isValidIri(r)){if(!r||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid resource IRI: "+r))}return this.dataFactory.namedNode(r)}createVocabOrBaseTerm(t,e){if(e.startsWith("_:"))return this.dataFactory.blankNode(e.substr(2));const r=this.parsingContext.getExpandOptions();let n=t.expandTerm(e,!0,r);if(n===e&&(n=t.expandTerm(e,!1,r)),!a.isValidIri(n)){if(!n||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid term IRI: "+n))}return this.dataFactory.namedNode(n)}intToString(t,e){if("number"==typeof t){if(Number.isFinite(t)){return!(t%1==0)||e&&e.value===a.XSD_DOUBLE?t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(t).toString()}return t>0?"INF":"-INF"}return t}stringValueToTerm(t,e,r,n,i){const s=a.getContextValueType(e,r);if(s)if("@id"===s){if(!i)return this.resourceToTerm(e,this.intToString(n,i))}else if("@vocab"===s){if(!i)return this.createVocabOrBaseTerm(e,this.intToString(n,i))}else i=this.dataFactory.namedNode(s);if(!i){const s=a.getContextValueLanguage(e,r),o=a.getContextValueDirection(e,r);return o&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(t,this.intToString(n,i),s,o):this.dataFactory.literal(this.intToString(n,i),s)}return this.dataFactory.literal(this.intToString(n,i),i)}createLanguageDirectionLiteral(t,e,r,n){if("i18n-datatype"===this.parsingContext.rdfDirection)return r||(r=""),this.dataFactory.literal(e,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${r}_${n}`));{const i=this.dataFactory.blankNode(),s=this.getDefaultGraph();return this.parsingContext.emitQuad(t,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"value"),this.dataFactory.literal(e),s)),r&&this.parsingContext.emitQuad(t,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"language"),this.dataFactory.literal(r),s)),this.parsingContext.emitQuad(t,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"direction"),this.dataFactory.literal(n),s)),i}}valueToJsonString(t){return s(t)}async unaliasKeyword(t,e,r,i,s){if(Number.isInteger(t))return t;if(!i){const t=this.parsingContext.unaliasedKeywordCacheStack[r];if(t)return t}if(!n.Util.isPotentialKeyword(t)){let r=(s=s||await this.parsingContext.getContext(e)).getContextRaw()[t];r&&"object"==typeof r&&(r=r["@id"]),n.Util.isValidKeyword(r)&&(t=r)}return i?t:this.parsingContext.unaliasedKeywordCacheStack[r]=t}async unaliasKeywordParent(t,e){return await this.unaliasKeyword(e>0&&t[e-1],t,e-1)}async unaliasKeywords(t,e,r,n){const i={};for(const s in t)i[await this.unaliasKeyword(s,e,r+1,!0,n)]=t[s];return i}isLiteral(t){for(let e=t;e>=0;e--)if(this.parsingContext.literalStack[e]||this.parsingContext.jsonLiteralStack[e])return!0;return!1}async getDepthOffsetGraph(t,e){for(let r=t-1;r>0;r--)if("@graph"===await this.unaliasKeyword(e[r],e,r)){const n=(await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,e,r)).containers;return i.EntryHandlerContainer.isComplexGraphContainer(n)?-1:t-r-1}return-1}validateReverseSubject(t){if("Literal"===t.termType)throw new n.ErrorCoded("Found illegal literal in subject position: "+t.value,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(t,e){let r=this.getDefaultGraph();const{containers:n,depth:s}=await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,t,e);if("@graph"in n){const e=i.EntryHandlerContainer.getContainerGraphIndex(n,s,t),a=this.parsingContext.graphContainerTermStack[s];if(r=a?a[e]:null,!r){let i=null;if("@id"in n){const e=await this.getContainerKey(t[s],t,s);null!==e&&(i=await this.resourceToTerm(await this.parsingContext.getContext(t),e))}i||(i=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[s]||(this.parsingContext.graphContainerTermStack[s]={}),r=this.parsingContext.graphContainerTermStack[s][e]=i}}return r}async getPropertiesDepth(t,e){let r=e;for(let n=e-1;n>0;n--)if("number"!=typeof t[n]){const e=await this.unaliasKeyword(t[n],t,n);if("@reverse"===e)return n;if("@nest"!==e)return r;r=n}return r}async getContainerKey(t,e,r){const n=await this.unaliasKeyword(t,e,r);return"@none"===n?null:n}}e.Util=a,a.XSD="http://www.w3.org/2001/XMLSchema#",a.XSD_BOOLEAN=a.XSD+"boolean",a.XSD_INTEGER=a.XSD+"integer",a.XSD_DOUBLE=a.XSD+"double",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EntryHandlerKeyword=class{constructor(t){this.keyword=t}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,n,i){return!1}async test(t,e,r,n,i){return r===this.keyword}}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(42),i=r(43),s=r(21);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=o(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|d(e.length);return 0===(t=o(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?o(t,0):f(t,e);if("Buffer"===e.type&&s(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=o(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=o(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return O(this,e,r);case"base64":return R(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){var s,a=1,o=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,o/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var h=-1;for(s=r;s<o;s++)if(l(t,s)===l(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===u)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var c=!0,f=0;f<u;f++)if(l(t,s+f)!==l(e,f)){c=!1;break}if(c)return s}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[r+a]=o}return a}function v(t,e,r,n){return G(B(e,t.length-r),t,r,n)}function E(t,e,r,n){return G(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function m(t,e,r,n){return E(t,e,r,n)}function x(t,e,r,n){return G(F(e),t,r,n)}function C(t,e,r,n){return G(function(t,e){for(var r,n,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function R(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,a,o,u,l=t[i],h=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=r)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(s=t[i+1]))&&(u=(31&l)<<6|63&s)>127&&(h=u);break;case 3:s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&(u=(15&l)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(h=u)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return h(e),e<=0?o(t,e):void 0!==r?"string"==typeof n?o(t,e).fill(r,n):o(t,e).fill(r):o(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),o=Math.min(s,a),l=this.slice(n,i),h=t.slice(e,r),c=0;c<o;++c)if(l[c]!==h[c]){s=l[c],a=h[c];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return E(this,t,e,r);case"latin1":case"binary":return m(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function O(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function T(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=M(t[s]);return i}function A(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function P(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,s){return s||P(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,s){return s||P(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var s=0,a=1,o=0;for(this[e]=255&t;++s<r&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var s=r-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=u.isBuffer(t)?t:B(new u(t,n).toString()),o=a.length;for(s=0;s<r-e;++s)this[s+e]=a[s%o]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t,e){super(t),this.code=e}}e.ErrorCoded=n,function(t){t.COLLIDING_KEYWORDS="colliding keywords",t.CONFLICTING_INDEXES="conflicting indexes",t.CYCLIC_IRI_MAPPING="cyclic IRI mapping",t.INVALID_ID_VALUE="invalid @id value",t.INVALID_INDEX_VALUE="invalid @index value",t.INVALID_NEST_VALUE="invalid @nest value",t.INVALID_PREFIX_VALUE="invalid @prefix value",t.INVALID_PROPAGATE_VALUE="invalid @propagate value",t.INVALID_REVERSE_VALUE="invalid @reverse value",t.INVALID_IMPORT_VALUE="invalid @import value",t.INVALID_VERSION_VALUE="invalid @version value",t.INVALID_BASE_IRI="invalid base IRI",t.INVALID_CONTAINER_MAPPING="invalid container mapping",t.INVALID_CONTEXT_ENTRY="invalid context entry",t.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",t.INVALID_DEFAULT_LANGUAGE="invalid default language",t.INVALID_INCLUDED_VALUE="invalid @included value",t.INVALID_IRI_MAPPING="invalid IRI mapping",t.INVALID_JSON_LITERAL="invalid JSON literal",t.INVALID_KEYWORD_ALIAS="invalid keyword alias",t.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",t.INVALID_LANGUAGE_MAPPING="invalid language mapping",t.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",t.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",t.INVALID_LOCAL_CONTEXT="invalid local context",t.INVALID_REMOTE_CONTEXT="invalid remote context",t.INVALID_REVERSE_PROPERTY="invalid reverse property",t.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",t.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",t.INVALID_SCOPED_CONTEXT="invalid scoped context",t.INVALID_SCRIPT_ELEMENT="invalid script element",t.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",t.INVALID_TERM_DEFINITION="invalid term definition",t.INVALID_TYPE_MAPPING="invalid type mapping",t.INVALID_TYPE_VALUE="invalid type value",t.INVALID_TYPED_VALUE="invalid typed value",t.INVALID_VALUE_OBJECT="invalid value object",t.INVALID_VALUE_OBJECT_VALUE="invalid value object value",t.INVALID_VOCAB_MAPPING="invalid vocab mapping",t.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",t.KEYWORD_REDEFINITION="keyword redefinition",t.LOADING_DOCUMENT_FAILED="loading document failed",t.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",t.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",t.PROCESSING_MODE_CONFLICT="processing mode conflict",t.PROTECTED_TERM_REDEFINITION="protected term redefinition",t.CONTEXT_OVERFLOW="context overflow",t.INVALID_BASE_DIRECTION="invalid base direction",t.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",t.INVALID_STREAMING_KEY_ORDER="invalid streaming key order"}(e.ERROR_CODES||(e.ERROR_CODES={}))},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(7).Buffer)},function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&d())}function d(){if(!h){var t=o(f);h=!0;for(var e=l.length;e;){for(u=l,l=[];++c<e;)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||h||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,a,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(s=new Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return e.nextTick((function(){t.apply(null,s)}))}}}:t.exports=e}).call(this,r(10))},function(t,e,r){var n=r(7),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=a),s(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(3);class s{static async handlePredicateObject(t,e,r,n,i,s,a){const o=await e.getPropertiesDepth(r,n),u=await e.getDepthOffsetGraph(n,r),l=n-u,h=t.idStack[o];if(h)for(const c of h){if(u>=0){const r=t.idStack[l-1];if(r)for(const o of r)a?(e.validateReverseSubject(s),t.emitQuad(n,e.dataFactory.quad(s,i,c,o))):t.emitQuad(n,e.dataFactory.quad(c,i,s,o));else a?(e.validateReverseSubject(s),t.getUnidentifiedGraphBufferSafe(l-1).push({subject:s,predicate:i,object:c})):t.getUnidentifiedGraphBufferSafe(l-1).push({subject:c,predicate:i,object:s})}else{const u=await e.getGraphContainerValue(r,o);a?(e.validateReverseSubject(s),t.emitQuad(n,e.dataFactory.quad(s,i,c,u))):t.emitQuad(n,e.dataFactory.quad(c,i,s,u))}}else a&&e.validateReverseSubject(s),t.getUnidentifiedValueBufferSafe(o).push({predicate:i,object:s,reverse:a})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(t,e,r,n,s){const a=r[n];if(a){const s=await t.getContext(r);if(await e.predicateToTerm(s,r[n]))return"@json"===i.Util.getContextValueType(s,a)&&(t.jsonLiteralStack[n+1]=!0),!0}return!1}async test(t,e,r,n,i){return n[i]}async handle(t,e,r,a,o,u,l){const h=a[u],c=await t.getContext(a),f=await e.predicateToTerm(c,r);if(f){const l=await e.valueToTerm(c,r,o,u,a);if(l.length)for(let d of l){const l=i.Util.isPropertyReverse(c,h,await e.unaliasKeywordParent(a,u));if(o){const s="@list"in i.Util.getContextValueContainer(c,r);if(s||o["@list"]){if((s&&!Array.isArray(o)&&!o["@list"]||o["@list"]&&!Array.isArray(o["@list"]))&&d!==e.rdfNil){const r=e.dataFactory.blankNode();t.emitQuad(u,e.dataFactory.quad(r,e.rdfRest,e.rdfNil,e.getDefaultGraph())),t.emitQuad(u,e.dataFactory.quad(r,e.rdfFirst,d,e.getDefaultGraph())),d=r}if(l&&!t.allowSubjectList)throw new n.ErrorCoded("Found illegal list value in subject position at "+r,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await s.handlePredicateObject(t,e,a,u,f,d,l)}else t.emittedStack[u]=!1}}}e.EntryHandlerPredicate=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(45))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static isCompactIri(t){return t.indexOf(":")>0&&!(t&&"#"===t[0])}static getPrefix(t,e){if(t&&"#"===t[0])return null;const r=t.indexOf(":");if(r>=0){if(t.length>r+1&&"/"===t.charAt(r+1)&&"/"===t.charAt(r+2))return null;const n=t.substr(0,r);if("_"===n)return null;if(e[n])return n}return null}static getContextValueId(t){if(null===t||"string"==typeof t)return t;const e=t["@id"];return e||null}static isSimpleTermDefinitionPrefix(t,e){return!n.isPotentialKeyword(t)&&("_"===t[0]||e.allowPrefixNonGenDelims||n.isPrefixIriEndingWithGenDelim(t))}static isPotentialKeyword(t){return"string"==typeof t&&n.KEYWORD_REGEX.test(t)}static isPrefixIriEndingWithGenDelim(t){return n.ENDS_WITH_GEN_DELIM.test(t)}static isPrefixValue(t){return t&&("string"==typeof t||t&&"object"==typeof t)}static isValidIri(t){return n.IRI_REGEX.test(t)}static isValidIriWeak(t){return!!t&&":"!==t[0]&&n.IRI_REGEX_WEAK.test(t)}static isValidKeyword(t){return n.VALID_KEYWORDS[t]}static isTermProtected(t,e){const r=t[e];return!("string"==typeof r)&&r&&r["@protected"]}static hasProtectedTerms(t){for(const e of Object.keys(t))if(n.isTermProtected(t,e))return!0;return!1}static isReservedInternalKeyword(t){return t.startsWith("@__")}}n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,n.IRI_REGEX_WEAK=/(?::[^:])|\//,n.KEYWORD_REGEX=/^@[a-z]+$/i,n.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,n.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,n.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,n.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},n.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],n.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],n.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],n.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],n.CONTAINERS_1_0=["@list","@set","@index"],e.Util=n},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,s,a,o;if(l(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),void 0===a)a=s[e]=r,++t._eventsCount;else if("function"==typeof a?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=h(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,o=u,console&&console.warn&&console.warn(o)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):_(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)s(u,this,e);else{var l=u.length,h=_(u,l);for(r=0;r<l;++r)s(h[r],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return l(e),this.on(t,d(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,d(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,s,a;if(l(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){(e=t.exports=r(28)).Stream=e,e.Readable=e,e.Writable=r(18),e.Duplex=r(2),e.Transform=r(32),e.PassThrough=r(52)},function(t,e,r){"use strict";(function(e,n,i){var s=r(11);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=b;var o,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:s.nextTick;b.WritableState=y;var l=Object.create(r(9));l.inherits=r(6);var h={deprecate:r(51)},c=r(29),f=r(12).Buffer,d=i.Uint8Array||function(){};var p,g=r(30);function _(){}function y(t,e){o=o||r(2),t=t||{};var n=e instanceof o;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(s.nextTick(i,n),s.nextTick(C,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),C(t,e))}(t,r,n,e,i);else{var a=m(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||E(t,r),n?u(v,t,r,a,i):v(t,r,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(t){if(o=o||r(2),!(p.call(b,this)||this instanceof o))return new b(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function w(t,e,r,n,i,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function v(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),C(t,e)}function E(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)i[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;i.allBuffers=u,w(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,h=r.encoding,c=r.callback;if(w(t,e,!1,e.objectMode?1:l.length,l,h,c),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function m(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),C(t,e)}))}function C(t,e){var r=m(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,s.nextTick(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}l.inherits(b,c),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===b&&(t&&t._writableState instanceof y)}})):p=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,r){var n,i=this._writableState,a=!1,o=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof d);return o&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=_),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),s.nextTick(e,r)}(this,r):(o||function(t,e,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),s.nextTick(n,a),i=!1),i}(this,i,t,r))&&(i.pendingcb++,a=function(t,e,r,n,i,s){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var o=e.objectMode?1:n.length;e.length+=o;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,o,n,i,s);return u}(this,i,o,t,e,r)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,C(t,e),r&&(e.finished?s.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(10),r(49).setImmediate,r(5))},function(t,e,r){t.exports=i;var n=r(16).EventEmitter;function i(){n.call(this)}r(6)(i,n),i.Readable=r(17),i.Writable=r(53),i.Duplex=r(54),i.Transform=r(55),i.PassThrough=r(56),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",s),t._isStdio||e&&!1===e.end||(r.on("end",o),r.on("close",u));var a=!1;function o(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){r.removeListener("data",i),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",h),r.removeListener("close",h),t.removeListener("close",h)}return r.on("error",l),t.on("error",l),r.on("end",h),r.on("close",h),t.on("close",h),t.emit("pipe",r),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(41),i=r(1),s=r(19),a=r(57),o=r(33),u=r(67),l=r(13),h=r(68),c=r(69),f=r(70),d=r(71),p=r(72),g=r(73),_=r(74),y=r(75),b=r(76),w=r(3),v=r(25);class E extends s.Transform{constructor(t){super({objectMode:!0}),t=t||{},this.options=t,this.parsingContext=new b.ParsingContext(Object.assign({parser:this},t)),this.util=new w.Util({dataFactory:t.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new n,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners()}static fromHttpResponse(t,e,r,n){let s,a;if("application/ld+json"!==e){if("application/json"!==e&&!e.endsWith("+json"))throw new i.ErrorCoded("Unsupported JSON-LD media type "+e,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(r&&r.has("Link")&&r.forEach((e,r)=>{if("link"===r){const r=v.parse(e);for(const e of r.get("rel","http://www.w3.org/ns/json-ld#context")){if(s)throw new i.ErrorCoded("Multiple JSON-LD context link headers were found on "+t,i.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);s=e.uri}}}),!s)throw new i.ErrorCoded(`Missing context link header for media type ${e} on ${t}`,i.ERROR_CODES.LOADING_DOCUMENT_FAILED)}if(r&&r.has("Content-Type")){const t=r.get("Content-Type"),e=/; *profile=([^"]*)/.exec(t);e&&"http://www.w3.org/ns/json-ld#streaming"===e[1]&&(a=!0)}return new E(Object.assign({baseIRI:t,context:s,streamingProfile:a},n||{}))}import(t){const e=new s.PassThrough({objectMode:!0});t.on("error",t=>r.emit("error",t)),t.on("data",t=>e.write(t)),t.on("end",()=>e.emit("end"));const r=e.pipe(new E(this.options));return r}_transform(t,e,r){this.jsonParser.write(t),this.lastOnValueJob.then(()=>r(),t=>r(t))}async newOnValueJob(t,e,r,n){let s=!0;if(n&&r<this.lastDepth){const t=this.parsingContext.listPointerStack[this.lastDepth];t&&(t.value&&this.emit("data",this.util.dataFactory.quad(t.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),t.listId.listHead=!0,this.parsingContext.idStack[t.listRootDepth+1]=[t.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await o.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),s=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const a=await this.util.unaliasKeyword(t[r],t,r),u=await this.util.unaliasKeywordParent(t,r);this.parsingContext.emittedStack[r]=!0;let l=!0;i.Util.isValidKeyword(a)&&"@reverse"===u&&this.emit("error",new i.ErrorCoded(`Found the @id '${e}' inside an @reverse property`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let h=!1;this.parsingContext.validationStack.length>1&&(h=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let e=Math.max(1,this.parsingContext.validationStack.length-1);e<t.length-1;e++){const n=this.parsingContext.validationStack[e]||(this.parsingContext.validationStack[e]=await this.validateKey(t.slice(0,e+1),e,h));if(!n.valid){this.parsingContext.emittedStack[r]=!1,l=!1;break}!h&&n.property&&(h=!0)}if(this.util.isLiteral(r)&&(l=!1),l)for(const n of E.ENTRY_HANDLERS){const i=await n.test(this.parsingContext,this.util,a,t,r);if(i){await n.handle(this.parsingContext,this.util,a,t,e,r,i),n.isStackProcessor()&&(this.parsingContext.processingStack[r]=!0);break}}0===r&&Array.isArray(e)&&await this.util.validateValueIndexes(e),s&&r<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=r,this.lastKeys=t,this.parsingContext.unaliasedKeywordCacheStack.splice(r-1)}flushStacks(t){this.parsingContext.processingStack.splice(t,1),this.parsingContext.processingType.splice(t,1),this.parsingContext.emittedStack.splice(t,1),this.parsingContext.idStack.splice(t,1),this.parsingContext.graphStack.splice(t+1,1),this.parsingContext.graphContainerTermStack.splice(t,1),this.parsingContext.jsonLiteralStack.splice(t,1),this.parsingContext.validationStack.splice(t-1,2),this.parsingContext.literalStack.splice(t,this.parsingContext.literalStack.length-t)}async flushBuffer(t,e){let r=this.parsingContext.idStack[t];r||(r=this.parsingContext.idStack[t]=[this.util.dataFactory.blankNode()]);const n=this.parsingContext.unidentifiedValuesBuffer[t];if(n){for(const i of r){const r=await this.util.getDepthOffsetGraph(t,e),s=this.parsingContext.graphStack[t]||r>=0?this.parsingContext.idStack[t-r-1]:[await this.util.getGraphContainerValue(e,t)];if(s)for(const e of s){this.parsingContext.emittedStack[t]=!0;for(const r of n)r.reverse?this.parsingContext.emitQuad(t,this.util.dataFactory.quad(r.object,r.predicate,i,e)):this.parsingContext.emitQuad(t,this.util.dataFactory.quad(i,r.predicate,r.object,e))}else{const r=this.parsingContext.getUnidentifiedGraphBufferSafe(t-await this.util.getDepthOffsetGraph(t,e)-1);for(const t of n)t.reverse?r.push({object:i,predicate:t.predicate,subject:t.object}):r.push({object:t.object,predicate:t.predicate,subject:i})}}this.parsingContext.unidentifiedValuesBuffer.splice(t,1),this.parsingContext.literalStack.splice(t,1),this.parsingContext.jsonLiteralStack.splice(t,1)}const i=this.parsingContext.unidentifiedGraphsBuffer[t];if(i){for(const e of r){const r=1!==t||"BlankNode"!==e.termType||this.parsingContext.topLevelProperties?e:this.util.getDefaultGraph();this.parsingContext.emittedStack[t]=!0;for(const e of i)this.parsingContext.emitQuad(t,this.util.dataFactory.quad(e.subject,e.predicate,e.object,r))}this.parsingContext.unidentifiedGraphsBuffer.splice(t,1)}}async validateKey(t,e,r){for(const n of E.ENTRY_HANDLERS)if(await n.validate(this.parsingContext,this.util,t,e,r))return{valid:!0,property:r||n.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=t=>{const e=this.jsonParser.stack.length,r=new Array(e+1).fill(0).map((t,r)=>r===e?this.jsonParser.key:this.jsonParser.stack[r].key);if(!this.isParsingContextInner(e)){const n=()=>this.newOnValueJob(r,t,e,!0);if(this.parsingContext.streamingProfile||this.parsingContext.contextTree.getContext(r.slice(0,-1)))this.lastOnValueJob=this.lastOnValueJob.then(n);else if("@context"===r[e]){let t=this.contextJobs[e];t||(t=this.contextJobs[e]=[]),t.push(n)}else"@type"===r[e]||"number"==typeof r[e]&&"@type"===r[e-1]?this.typeJobs.push({job:n,keys:r.slice(0,r.length-1)}):this.contextAwaitingJobs.push({job:n,keys:r});this.parsingContext.streamingProfile||0!==e||(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=t=>{this.emit("error",t)}}isParsingContextInner(t){for(let e=t;e>0;e--)if("@context"===this.jsonParser.stack[e-1].key)return!0;return!1}async executeBufferedJobs(){for(const t of this.contextJobs)if(t)for(const e of t)await e();this.parsingContext.unaliasedKeywordCacheStack.splice(0);for(const t of this.contextAwaitingJobs){if(this.typeJobs.length>0){const e=[],r=[];for(let n=0;n<this.typeJobs.length;n++){const i=this.typeJobs[n];w.Util.isPrefixArray(i.keys,t.keys)&&(e.push(i),r.push(n))}const n=e.sort((t,e)=>t.keys.length-e.keys.length);for(const t of n)await t.job();const i=r.sort().reverse();for(const t of i)this.typeJobs.splice(t,1)}await t.job()}}}e.JsonLdParser=E,E.DEFAULT_PROCESSING_MODE="1.1",E.ENTRY_HANDLERS=[new a.EntryHandlerArrayValue,new h.EntryHandlerKeywordContext,new f.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new p.EntryHandlerKeywordNest,new g.EntryHandlerKeywordType,new y.EntryHandlerKeywordValue,new o.EntryHandlerContainer,new _.EntryHandlerKeywordUnknownFallback,new l.EntryHandlerPredicate,new u.EntryHandlerInvalidFallback]},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function a(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,o)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),r(23);const i=r(14),s=r(8),a=r(24),o=r(26),u=r(15),l=r(27);class h{constructor(t){t=t||{},this.documentLoader=t.documentLoader||new a.FetchDocumentLoader,this.documentCache={},this.validateContext=!t.skipValidation,this.expandContentTypeToBase=!!t.expandContentTypeToBase,this.remoteContextsDepthLimit=t.remoteContextsDepthLimit||32}static validateLanguage(t,e,r){if("string"!=typeof t)throw new s.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(t)}'`,r);if(!u.Util.REGEX_LANGUAGE_TAG.test(t)){if(e)throw new s.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(t)}'`,r);return!1}return!0}static validateDirection(t,e){if("string"!=typeof t)throw new s.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(t)}'`,s.ERROR_CODES.INVALID_BASE_DIRECTION);if(!u.Util.REGEX_DIRECTION_TAG.test(t)){if(e)throw new s.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(t)}'`,s.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(t){for(const e of Object.keys(t)){const r=t[e];if(r&&"object"==typeof r&&r["@reverse"]&&!r["@id"]){if("string"!=typeof r["@reverse"]||u.Util.isValidKeyword(r["@reverse"]))throw new s.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${r["@reverse"]}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);r["@id"]=r["@reverse"],u.Util.isPotentialKeyword(r["@reverse"])?delete r["@reverse"]:r["@reverse"]=!0}}return t}expandPrefixedTerms(t,e){const r=t.getContextRaw();for(const n of Object.keys(r))if(u.Util.EXPAND_KEYS_BLACKLIST.indexOf(n)<0&&!u.Util.isReservedInternalKeyword(n)){const i=r[n];if(u.Util.isPotentialKeyword(n)&&u.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(n)>=0&&("@type"!==n||"object"==typeof r[n]&&!r[n]["@protected"]&&"@set"!==r[n]["@container"]))throw new s.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${n} to ${JSON.stringify(i)}`,s.ERROR_CODES.KEYWORD_REDEFINITION);if(u.Util.ALIAS_RANGE_BLACKLIST.indexOf(u.Util.getContextValueId(i))>=0)throw new s.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${n} to ${JSON.stringify(i)}`,s.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(i&&u.Util.isPotentialKeyword(u.Util.getContextValueId(i))&&!0===i["@prefix"])throw new s.ErrorCoded(`Tried to use keyword aliases as prefix: '${n}': '${JSON.stringify(i)}'`,s.ERROR_CODES.INVALID_TERM_DEFINITION);for(;u.Util.isPrefixValue(r[n]);){const i=r[n];let s=!1;if("string"==typeof i)r[n]=t.expandTerm(i,!0),s=s||i!==r[n];else{const a=i["@id"],o=i["@type"],l=!("@prefix"in i)||u.Util.isValidIri(n);if("@id"in i)null!=a&&"string"==typeof a&&(r[n]["@id"]=t.expandTerm(a,!0),s=s||a!==r[n]["@id"]);else if(!u.Util.isPotentialKeyword(n)&&l){const e=t.expandTerm(n,!0);e!==n&&(r[n]["@id"]=e,s=!0)}!o||"string"!=typeof o||"@vocab"===o||i["@container"]&&i["@container"]["@type"]||!l||(r[n]["@type"]=t.expandTerm(o,!0),e&&o===r[n]["@type"]&&(r[n]["@type"]=t.expandTerm(o,!1)),s=s||o!==r[n]["@type"])}if(!s)break}}}normalize(t,{processingMode:e,normalizeLanguageTags:r}){if(r||1===e)for(const e of Object.keys(t))if("@language"===e&&"string"==typeof t[e])t[e]=t[e].toLowerCase();else{const r=t[e];r&&"object"==typeof r&&"string"==typeof r["@language"]&&(r["@language"]=r["@language"].toLowerCase())}}containersToHash(t){for(const e of Object.keys(t)){const r=t[e];if(r&&"object"==typeof r)if("string"==typeof r["@container"])r["@container"]={[r["@container"]]:!0};else if(Array.isArray(r["@container"])){const t={};for(const e of r["@container"])t[e]=!0;r["@container"]=t}}}applyScopedProtected(t,{processingMode:e}){if(e&&e>=1.1&&t["@protected"]){for(const e of Object.keys(t))if(!u.Util.isReservedInternalKeyword(e)&&!u.Util.isPotentialKeyword(e)&&!u.Util.isTermProtected(t,e)){const r=t[e];r&&"object"==typeof r?"@protected"in t[e]||(t[e]["@protected"]=!0):t[e]={"@id":r,"@protected":!0}}delete t["@protected"]}}validateKeywordRedefinitions(t,e,r){for(const n of Object.keys(e))if(u.Util.isTermProtected(t,n)){if("string"==typeof e[n]){const i=u.Util.isSimpleTermDefinitionPrefix(e[n],r);e[n]={"@id":e[n]},i&&(e[n]["@prefix"]=!0,t[n]["@prefix"]=!0)}const i=l(t[n]);e[n]["@protected"]=!0;if(i!==l(e[n]))throw new s.ErrorCoded(`Attempted to override the protected keyword ${n} from ${JSON.stringify(u.Util.getContextValueId(t[n]))} to ${JSON.stringify(u.Util.getContextValueId(e[n]))}`,s.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(t,{processingMode:e}){for(const r of Object.keys(t)){if(u.Util.isReservedInternalKeyword(r))continue;if(""===r)throw new s.ErrorCoded(`The empty term is not allowed, got: '${r}': '${JSON.stringify(t[r])}'`,s.ERROR_CODES.INVALID_TERM_DEFINITION);const n=t[r],i=typeof n;if(u.Util.isPotentialKeyword(r)){switch(r.substr(1)){case"vocab":if(null!==n&&"string"!==i)throw new s.ErrorCoded("Found an invalid @vocab IRI: "+n,s.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==n&&"string"!==i)throw new s.ErrorCoded("Found an invalid @base IRI: "+t[r],s.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==n&&h.validateLanguage(n,!0,s.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==n&&"number"!==i)throw new s.ErrorCoded("Found an invalid @version number: "+n,s.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==n&&h.validateDirection(n,!0);break;case"propagate":if(1===e)throw new s.ErrorCoded("Found an illegal @propagate keyword: "+n,s.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==n&&"boolean"!==i)throw new s.ErrorCoded("Found an invalid @propagate value: "+n,s.ERROR_CODES.INVALID_PROPAGATE_VALUE)}if(u.Util.isValidKeyword(r)&&u.Util.isValidKeyword(u.Util.getContextValueId(n)))throw new s.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${u.Util.getContextValueId(n)}'`,s.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==n)switch(i){case"string":if(u.Util.getPrefix(n,t)===r)throw new s.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.CYCLIC_IRI_MAPPING);if(u.Util.isValidIriWeak(r)){if("@type"===n)throw new s.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${n}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIri(n)&&n!==new o.JsonLdContextNormalized(t).expandTerm(r))throw new s.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${n}'`,s.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!(u.Util.isCompactIri(r)||"@id"in n||("@id"===n["@type"]?t["@base"]:t["@vocab"])))throw new s.ErrorCoded(`Missing @id in context entry: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);for(const a of Object.keys(n)){const l=n[a];if(l)switch(a){case"@id":if(u.Util.isValidKeyword(l)&&"@type"!==l&&"@id"!==l&&"@graph"!==l)throw new s.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIriWeak(r)){if("@type"===l)throw new s.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.isValidIri(l)&&l!==new o.JsonLdContextNormalized(t).expandTerm(r))throw new s.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!=typeof l)throw new s.ErrorCoded(`Detected non-string @id in context entry: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING);if(u.Util.getPrefix(l,t)===r)throw new s.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===n["@container"]&&"@id"!==l&&"@vocab"!==l)throw new s.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${r}': '${l}'`,s.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!=typeof l)throw new s.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(i)}'`,s.ERROR_CODES.INVALID_TYPE_MAPPING);if(!("@id"===l||"@vocab"===l||1!==e&&"@json"===l||1!==e&&"@none"===l||"_"!==l[0]&&u.Util.isValidIri(l)))throw new s.ErrorCoded(`A context @type must be an absolute IRI, found: '${r}': '${l}'`,s.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"==typeof l&&n["@id"]&&n["@id"]!==l)throw new s.ErrorCoded(`Found non-matching @id and @reverse term values in '${r}':'${l}' and '${n["@id"]}'`,s.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in n)throw new s.ErrorCoded(`@nest is not allowed in the reverse property '${r}'`,s.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===e&&(Object.keys(l).length>1||u.Util.CONTAINERS_1_0.indexOf(Object.keys(l)[0])<0))throw new s.ErrorCoded(`Invalid term @container for '${r}' ('${Object.keys(l)}') in 1.0, must be only one of ${u.Util.CONTAINERS_1_0.join(", ")}`,s.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const t of Object.keys(l)){if("@list"===t&&n["@reverse"])throw new s.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${r}'`,s.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(u.Util.CONTAINERS.indexOf(t)<0)throw new s.ErrorCoded(`Invalid term @container for '${r}' ('${t}'), must be one of ${u.Util.CONTAINERS.join(", ")}`,s.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":h.validateLanguage(l,!0,s.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":h.validateDirection(l,!0);break;case"@prefix":if(null!==l&&"boolean"!=typeof l)throw new s.ErrorCoded(`Found an invalid term @prefix boolean in: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in n)&&!u.Util.isValidIri(r))throw new s.ErrorCoded(`Invalid @prefix definition for '${r}' ('${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===e||!n["@container"]||!n["@container"]["@index"])throw new s.ErrorCoded(`Attempt to add illegal key to value object: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(u.Util.isPotentialKeyword(l)&&"@nest"!==l)throw new s.ErrorCoded(`Found an invalid term @nest value in: '${r}': '${JSON.stringify(n)}'`,s.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new s.ErrorCoded(`Found an invalid term value: '${r}': '${n}'`,s.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(t,e,r){return"string"==typeof t||(r&&!("@base"in t)&&e.parentContext&&"@base"in e.parentContext&&(t["@base"]=e.parentContext["@base"],e.parentContext["@__baseDocument"]&&(t["@__baseDocument"]=!0)),e.baseIRI&&!e.external&&("@base"in t?null===t["@base"]||"string"!=typeof t["@base"]||u.Util.isValidIri(t["@base"])||(t["@base"]=i.resolve(t["@base"],e.parentContext&&e.parentContext["@base"]||e.baseIRI)):(t["@base"]=e.baseIRI,t["@__baseDocument"]=!0))),t}normalizeContextIri(t,e){if(!u.Util.isValidIri(t)&&(t=i.resolve(t,e),!u.Util.isValidIri(t)))throw new Error("Invalid context IRI: "+t);return t}parseInnerContexts(t,e){return n(this,void 0,void 0,(function*(){for(const r of Object.keys(t)){const n=t[r];if(n&&"object"==typeof n&&"@context"in n&&null!==n["@context"]){if(this.validateContext)try{const i=Object.assign({},t);i[r]=Object.assign({},i[r]),delete i[r]["@context"],yield this.parse(n["@context"],Object.assign({},e,{parentContext:i,ignoreProtection:!0,ignoreRemoteScopedContexts:!0}))}catch(t){throw new s.ErrorCoded(t.message,s.ERROR_CODES.INVALID_SCOPED_CONTEXT)}n["@context"]=(yield this.parse(n["@context"],Object.assign({},e,{minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:t}))).getContextRaw()}}return t}))}parse(t,r={processingMode:h.DEFAULT_PROCESSING_MODE}){return n(this,void 0,void 0,(function*(){const{baseIRI:n,parentContext:i,external:a,processingMode:l,normalizeLanguageTags:c,ignoreProtection:f,minimalProcessing:d}=r;let p=i;const g=r.remoteContexts||{};if(Object.keys(g).length>=this.remoteContextsDepthLimit)throw new s.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(g),s.ERROR_CODES.CONTEXT_OVERFLOW);if(null==t){if(!f&&p&&u.Util.hasProtectedTerms(p))throw new s.ErrorCoded("Illegal context nullification when terms are protected",s.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new o.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}if("string"==typeof t){const e=this.normalizeContextIri(t,n),i=this.getOverriddenLoad(e,r);if(i)return new o.JsonLdContextNormalized(i);const s=yield this.parse(yield this.load(e),Object.assign({},r,{baseIRI:e,external:!0,remoteContexts:Object.assign({},g,{[e]:!0})}));return this.applyBaseEntry(s.getContextRaw(),r,!0),s}if(Array.isArray(t)){const e=[],i=yield Promise.all(t.map((t,i)=>{if("string"==typeof t){const s=this.normalizeContextIri(t,n);e[i]=s;const a=this.getOverriddenLoad(s,r);return a||this.load(s)}return t}));if(d)return new o.JsonLdContextNormalized(i);const s=yield i.reduce((t,n,i)=>t.then(t=>this.parse(n,Object.assign({},r,{baseIRI:e[i]||r.baseIRI,external:!!e[i]||r.external,parentContext:t.getContextRaw(),remoteContexts:e[i]?Object.assign({},g,{[e[i]]:!0}):g}))),Promise.resolve(new o.JsonLdContextNormalized(p||{})));return this.applyBaseEntry(s.getContextRaw(),r,!0),s}if("object"==typeof t){if("@context"in t)return yield this.parse(t["@context"],r);t=JSON.parse(JSON.stringify(t)),p&&(p=JSON.parse(JSON.stringify(p)));let i={};if(a&&delete t["@base"],this.applyBaseEntry(t,r,!0),this.containersToHash(t),d)return new o.JsonLdContextNormalized(t);let u={};if("@import"in t){if(!(l&&l>=1.1))throw new s.ErrorCoded("Context importing is not supported in JSON-LD 1.0",s.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!=typeof t["@import"])throw new s.ErrorCoded("An @import value must be a string, but got "+typeof t["@import"],s.ERROR_CODES.INVALID_IMPORT_VALUE);u=yield this.loadImportContext(this.normalizeContextIri(t["@import"],n)),delete t["@import"]}i=Object.assign({},i,p,u,t);const g=new o.JsonLdContextNormalized(i);return yield this.parseInnerContexts(i,r),!f&&p&&l&&l>=1.1&&this.validateKeywordRedefinitions(p,i,e.defaultExpandOptions),(i&&i["@version"]||l||h.DEFAULT_PROCESSING_MODE)>=1.1&&(t["@vocab"]&&"string"==typeof t["@vocab"]||""===t["@vocab"])&&t["@vocab"].indexOf(":")<0&&p&&"@vocab"in p&&(i["@vocab"]=p["@vocab"]+t["@vocab"]),this.idifyReverseTerms(i),this.expandPrefixedTerms(g,this.expandContentTypeToBase),this.normalize(i,{processingMode:l,normalizeLanguageTags:c}),this.applyScopedProtected(i,{processingMode:l}),this.validateContext&&this.validate(i,{processingMode:l}),g}throw new s.ErrorCoded("Tried parsing a context that is not a string, array or object, but got "+t,s.ERROR_CODES.INVALID_LOCAL_CONTEXT)}))}load(t){return n(this,void 0,void 0,(function*(){const e=this.documentCache[t];if(e)return"string"==typeof e?e:Array.isArray(e)?e.slice():Object.assign({},e);let r;try{r=yield this.documentLoader.load(t)}catch(e){throw new s.ErrorCoded(`Failed to load remote context ${t}: ${e.message}`,s.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in r))throw new s.ErrorCoded("Missing @context in remote context at "+t,s.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[t]=r["@context"]}))}getOverriddenLoad(t,e){if(t in(e.remoteContexts||{})){if(e.ignoreRemoteScopedContexts)return t;throw new s.ErrorCoded("Detected a cyclic context inclusion of "+t,s.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}loadImportContext(t){return n(this,void 0,void 0,(function*(){const e=yield this.load(t);if("object"!=typeof e||Array.isArray(e))throw new s.ErrorCoded("An imported context must be a single object: "+t,s.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in e)throw new s.ErrorCoded("An imported context can not import another context: "+t,s.ERROR_CODES.INVALID_CONTEXT_ENTRY);return e}))}}h.DEFAULT_PROCESSING_MODE=1.1,e.ContextParser=h,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},function(t,e,r){r(44),t.exports=self.fetch.bind(self)},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function a(t){try{u(n.next(t))}catch(t){s(t)}}function o(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,o)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),r(23);const i=r(8),s=r(25),a=r(14);e.FetchDocumentLoader=class{constructor(t){this.fetcher=t||fetch}load(t){return n(this,void 0,void 0,(function*(){const e=yield this.fetcher(t,{headers:new Headers({accept:"application/ld+json"})});if(e.ok&&e.headers){const r=e.headers.get("Content-Type");if("application/ld+json"===r)return yield e.json();if(e.headers.has("Link")){let r;if(e.headers.forEach((e,n)=>{if("link"===n){const n=s.parse(e);for(const e of n.get("type","application/ld+json"))if("alternate"===e.rel){if(r)throw new Error("Multiple JSON-LD alternate links were found on "+t);r=a.resolve(e.uri,t)}}}),r)return this.load(r)}throw new i.ErrorCoded("Unsupported JSON-LD media type "+r,i.ERROR_CODES.LOADING_DOCUMENT_FAILED)}throw new Error(e.statusText||"Status code: "+e.status)}))}}},function(t,e,r){"use strict";(function(e){var r=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=/\s|\uFEFF|\xA0/,s=/\r?\n[\x20\x09]+/g,a=/[;,"]/,o=/[;,"]|\s/,u=1,l=2,h=4;function c(t){return t.replace(n,"")}function f(t){return i.test(t)}function d(t,e){for(;f(t[e]);)e++;return e}function p(t){return o.test(t)}class g{constructor(t){this.refs=[],t&&this.parse(t)}rel(t){for(var e=[],r=0;r<this.refs.length;r++)this.refs[r].rel===t&&e.push(this.refs[r]);return e}get(t,e){t=t.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++)this.refs[n][t]===e&&r.push(this.refs[n]);return r}set(t){return this.refs.push(t),this}has(t,e){t=t.toLowerCase();for(var r=0;r<this.refs.length;r++)if(this.refs[r][t]===e)return!0;return!1}parse(t,e){t=c(t=(e=e||0)?t.slice(e):t).replace(s,"");for(var r=u,n=t.length,i=(e=0,null);e<n;)if(r===u){if(f(t[e])){e++;continue}if("<"!==t[e])throw new Error('Unexpected character "'+t[e]+'" at offset '+e);if(-1===(_=t.indexOf(">",e)))throw new Error("Expected end of URI delimiter at offset "+e);i={uri:t.slice(e+1,_)},this.refs.push(i),e=_,r=l,e++}else if(r===l){if(f(t[e])){e++;continue}if(";"===t[e])r=h,e++;else{if(","!==t[e])throw new Error('Unexpected character "'+t[e]+'" at offset '+e);r=u,e++}}else{if(r!==h)throw new Error('Unknown parser state "'+r+'"');if(";"===t[e]||f(t[e])){e++;continue}if(-1===(_=t.indexOf("=",e)))throw new Error("Expected attribute delimiter at offset "+e);var o=c(t.slice(e,_)).toLowerCase(),p="";if('"'===t[e=d(t,e=_+1)])for(e++;e<n;){if('"'===t[e]){e++;break}"\\"===t[e]&&e++,p+=t[e],e++}else{for(var _=e+1;!a.test(t[_])&&_<n;)_++;p=t.slice(e,_),e=_}switch(i[o]&&g.isSingleOccurenceAttr(o)||("*"===o[o.length-1]?i[o]=g.parseExtendedValue(p):(p="rel"===o||"type"===o?p.toLowerCase():p,null!=i[o]?Array.isArray(i[o])?i[o].push(p):i[o]=[i[o],p]:i[o]=p)),t[e]){case",":r=u;break;case";":r=h}e++}return i=null,this}toString(){for(var t=[],e="",r=null,n=0;n<this.refs.length;n++)r=this.refs[n],e=Object.keys(this.refs[n]).reduce((function(t,e){return"uri"===e?t:t+"; "+g.formatAttribute(e,r[e])}),"<"+r.uri+">"),t.push(e);return t.join(", ")}}g.isCompatibleEncoding=function(t){return r.test(t)},g.parse=function(t,e){return(new g).parse(t,e)},g.isSingleOccurenceAttr=function(t){return"rel"===t||"type"===t||"media"===t||"title"===t||"title*"===t},g.isTokenAttr=function(t){return"rel"===t||"type"===t||"anchor"===t},g.escapeQuotes=function(t){return t.replace(/"/g,'\\"')},g.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']+)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:g.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:g.isCompatibleEncoding(e[1])?decodeURIComponent(e[3]):e[3]}},g.formatExtendedAttribute=function(t,r){var n=(r.encoding||"utf-8").toUpperCase();return t+"="+n+"'"+(r.language||"en")+"'"+(e.isBuffer(r.value)&&g.isCompatibleEncoding(n)?r.value.toString(n):e.isBuffer(r.value)?r.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(r.value))},g.formatAttribute=function(t,e){return Array.isArray(e)?e.map(e=>g.formatAttribute(t,e)).join("; "):"*"===t[t.length-1]||"string"!=typeof e?g.formatExtendedAttribute(t,e):(g.isTokenAttr(t)?e=p(e)?'"'+g.escapeQuotes(e)+'"':g.escapeQuotes(e):p(e)&&(e='"'+(e=(e=encodeURIComponent(e)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),t+"="+e)},t.exports=g}).call(this,r(7).Buffer)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(14),i=r(22),s=r(8),a=r(15);e.JsonLdContextNormalized=class{constructor(t){this.contextRaw=t}getContextRaw(){return this.contextRaw}expandTerm(t,e,r=i.defaultExpandOptions){const o=this.contextRaw[t];if(null===o||o&&null===o["@id"])return null;let u=!0;if(o&&e){const e=a.Util.getContextValueId(o);if(e&&e!==t){if("string"==typeof e&&(a.Util.isValidIri(e)||a.Util.isValidKeyword(e)))return e;a.Util.isPotentialKeyword(e)||(u=!1)}}const l=a.Util.getPrefix(t,this.contextRaw),h=this.contextRaw["@vocab"],c=(!!h||""===h)&&h.indexOf(":")<0,f=this.contextRaw["@base"],d=a.Util.isPotentialKeyword(t);if(l){const e=this.contextRaw[l],n=a.Util.getContextValueId(e);if(n){if("string"!=typeof e&&r.allowPrefixForcing){if("_"!==n[0]&&!d&&!e["@prefix"]&&!(t in this.contextRaw))return t}else if(!a.Util.isSimpleTermDefinitionPrefix(n,r))return t;return n+t.substr(l.length+1)}}else{if(e&&(h||""===h||r.allowVocabRelativeToBase&&f&&c)&&!d&&!a.Util.isCompactIri(t)){if(c){if(r.allowVocabRelativeToBase)return n.resolve(h,f)+t;throw new s.ErrorCoded(`Relative vocab expansion for term '${t}' with vocab '${h}' is not allowed.`,s.ERROR_CODES.INVALID_VOCAB_MAPPING)}return h+t}if(!e&&f&&!d&&!a.Util.isCompactIri(t))return n.resolve(t,f)}if(u)return t;throw new s.ErrorCoded(`Invalid IRI mapping found for context entry '${t}': '${JSON.stringify(o)}'`,s.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(t,e){if(e&&this.contextRaw["@vocab"]&&t.startsWith(this.contextRaw["@vocab"]))return t.substr(this.contextRaw["@vocab"].length);if(!e&&this.contextRaw["@base"]&&t.startsWith(this.contextRaw["@base"]))return t.substr(this.contextRaw["@base"].length);const r={prefix:"",suffix:t};for(const n in this.contextRaw){const i=this.contextRaw[n];if(i&&!a.Util.isPotentialKeyword(n)){const s=a.Util.getContextValueId(i);if(t.startsWith(s)){const i=t.substr(s.length);if(i)i.length<r.suffix.length&&(r.prefix=n,r.suffix=i);else if(e)return n}}}return r.prefix?r.prefix+":"+r.suffix:t}}},function(t,e,r){"use strict";t.exports=function(t){return function t(e){if(null===e||"object"!=typeof e||null!=e.toJSON)return JSON.stringify(e);if(Array.isArray(e)&&0===e.length)return"[]";if(Array.isArray(e)&&1===e.length)return"["+t(e[0])+"]";if(Array.isArray(e))return"["+e.reduce((e,r,n)=>(e=1===n?t(e):e)+","+t(r))+"]";const r=Object.keys(e);if(0===r.length)return"{}";if(1===r.length)return"{"+t(r[0])+":"+t(e[r[0]])+"}";return"{"+r.sort().reduce((r,n,i)=>(r=1===i?t(r)+":"+t(e[r]):r)+","+t(n)+":"+t(e[n]))+"}"}(t)}},function(t,e,r){"use strict";(function(e,n){var i=r(11);t.exports=w;var s,a=r(21);w.ReadableState=b;r(16).EventEmitter;var o=function(t,e){return t.listeners(e).length},u=r(29),l=r(12).Buffer,h=e.Uint8Array||function(){};var c=Object.create(r(9));c.inherits=r(6);var f=r(46),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,g=r(47),_=r(30);c.inherits(w,u);var y=["error","close","destroy","pause","resume"];function b(t,e){t=t||{};var n=e instanceof(s=s||r(2));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=r(31).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function w(t){if(s=s||r(2),!(this instanceof w))return new w(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function v(t,e,r,n,i){var s,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,x(t)}(t,a)):(i||(s=function(t,e){var r;n=e,l.isBuffer(n)||n instanceof h||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):R(t,a)):E(t,a,e,!1))):n||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function E(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&x(t)),R(t,e)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=_.destroy,w.prototype._undestroy=_.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),v(this,t,e,!1,r)},w.prototype.unshift=function(t){return v(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return p||(p=r(31).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function m(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(C,t):C(t))}function C(t){d("emit readable"),t.emit("readable"),T(t)}function R(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(I,t,e))}function I(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function S(t){d("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function A(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),0===(t-=a)){a===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,a),0===(t-=a)){a===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function N(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function k(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}w.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):x(this),null;if(0===(t=m(t,e))&&e.ended)return 0===e.length&&N(this),null;var n,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=m(r,e))),null===(n=t>0?A(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&N(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,d("pipe count=%d opts=%j",s.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?h:w;function l(e,n){d("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),t.removeListener("close",y),t.removeListener("finish",b),t.removeListener("drain",c),t.removeListener("error",_),t.removeListener("unpipe",l),r.removeListener("end",h),r.removeListener("end",w),r.removeListener("data",g),f=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function h(){d("onend"),t.end()}s.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,T(t))}}(r);t.on("drain",c);var f=!1;var p=!1;function g(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==k(s.pipes,t))&&!f&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function _(e){d("onerror",e),w(),t.removeListener("error",_),0===o(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",b),w()}function b(){d("onfinish"),t.removeListener("close",y),w()}function w(){d("unpipe"),r.unpipe(t)}return r.on("data",g),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",_),t.once("close",y),t.once("finish",b),t.emit("pipe",r),s.flowing||(d("pipe resume"),r.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var a=k(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},w.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&x(this):i.nextTick(S,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(O,t,e))}(this,t)),this},w.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var s=0;s<y.length;s++)t.on(y[s],this.emit.bind(this,y[s]));return this._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=A}).call(this,r(5),r(10))},function(t,e,r){t.exports=r(16).EventEmitter},function(t,e,r){"use strict";var n=r(11);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";var n=r(12).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=h,this.end=c,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function h(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";t.exports=a;var n=r(2),i=Object.create(r(9));function s(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(6),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(58),i=r(59),s=r(60),a=r(61),o=r(3);class u{static isSimpleGraphContainer(t){return"@graph"in t&&("@set"in t&&2===Object.keys(t).length||1===Object.keys(t).length)}static isComplexGraphContainer(t){return"@graph"in t&&("@set"in t&&Object.keys(t).length>2||!("@set"in t)&&Object.keys(t).length>1)}static getContainerGraphIndex(t,e,r){let n=u.isSimpleGraphContainer(t),i="";for(let t=e;t<r.length;t++)n&&"number"!=typeof r[t]||(i+=":"+r[t]),n||"number"==typeof r[t]||(n=!0);return i}static async getContainerHandler(t,e,r){const n={containers:{"@set":!0},depth:r,fallback:!0};let i=!1;const s=await t.getContext(e,2);for(let t=r-1;t>=0;t--)if("number"!=typeof e[t]){const r=o.Util.getContextValue(s,"@container",e[t],!1);if(r&&u.isSimpleGraphContainer(r))return{containers:r,depth:t+1,fallback:!1};const a=o.Util.getContextValue(s,"@container",e[t-1],!1);if(a){const e="@graph"in a;for(const r in u.CONTAINER_HANDLERS)if(a[r])return e?u.CONTAINER_HANDLERS[r].canCombineWithGraph()?{containers:a,depth:t,fallback:!1}:n:i?n:{containers:a,depth:t,fallback:!1};return n}if(i)return n;i=!0}return n}static async isBufferableContainerHandler(t,e,r){const n=await u.getContainerHandler(t,e,r);return!n.fallback&&!("@graph"in n.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,n,i){return!!await this.test(t,e,null,r,n)}async test(t,e,r,n,i){const s=o.Util.getContextValueContainer(await t.getContext(n,2),n[i-1]);for(const t in u.CONTAINER_HANDLERS)if(s[t])return{containers:s,handler:u.CONTAINER_HANDLERS[t]};return null}async handle(t,e,r,n,i,s,a){return a.handler.handle(a.containers,t,e,n,i,s)}}e.EntryHandlerContainer=u,u.CONTAINER_HANDLERS={"@id":new n.ContainerHandlerIdentifier,"@index":new i.ContainerHandlerIndex,"@language":new s.ContainerHandlerLanguage,"@type":new a.ContainerHandlerType}},function(t,e,r){var n=r(62);t.exports=n},function(t,e){function r(){this.value=""}r.prototype.equals=function(t){return!!t&&t.termType===this.termType},r.prototype.termType="DefaultGraph",t.exports=r},function(t,e){function r(t){this.value=t}r.prototype.equals=function(t){return!!t&&t.termType===this.termType&&t.value===this.value},r.prototype.termType="NamedNode",t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(20))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(78);e.getLiteralLanguage=n.getLiteralLanguage,e.getLiteralType=n.getLiteralType,e.getLiteralValue=n.getLiteralValue,e.quadToStringQuad=n.quadToStringQuad,e.stringQuadToQuad=n.stringQuadToQuad,e.stringToTerm=n.stringToTerm,e.termToString=n.termToString},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return f}));var n=r(0),i=r(40),s=r.n(i);const{xsd:a}=n.a;var o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,u={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},l=/[\x00-\x20<>\\"\{\}\|\^\`]/,h={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},c=/$0^/;class f{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s()\[\]\{\}"'<])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode)for(var e in this._n3Mode=!1,this)!(e in h)&&this[e]instanceof RegExp&&(this[e]=c);else this._n3Mode=!1!==t.n3;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,e){for(var r=this._input,n=this._comments;;){for(var i,s;i=this._newline.exec(r);)n&&(s=this._comment.exec(i[0]))&&t(null,{line:this._line,type:"comment",value:s[1],prefix:""}),r=r.substr(i[0].length,r.length),this._line++;if(!i&&(i=this._whitespace.exec(r))&&(r=r.substr(i[0].length,r.length)),this._endOfFile.test(r))return e&&(n&&(s=this._comment.exec(r))&&t(null,{line:this._line,type:"comment",value:s[1],prefix:""}),t(r=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=r;var o=this._line,u="",h="",c="",f=r[0],d=null,p=0,g=!1;switch(f){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(p=1,u="^");break}if(this._previousMarker="^^","<"!==(r=r.substr(2))[0]){g=!0;break}case"<":if(d=this._unescapedIri.exec(r))u="IRI",h=d[1];else if(d=this._iri.exec(r)){if(null===(h=this._unescape(d[1]))||l.test(h))return y(this);u="IRI"}else this._n3Mode&&r.length>1&&"="===r[1]&&(u="inverse",p=2,h=">");break;case"_":((d=this._blank.exec(r))||e&&(d=this._blank.exec(r+" ")))&&(u="blank",c="_",h=d[1]);break;case'"':if(d=this._simpleQuotedString.exec(r))h=d[1];else if(({value:h,matchLength:p}=this._parseLiteral(r)),null===h)return y(this);null===d&&0===p||(u="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(d=this._simpleApostropheString.exec(r))h=d[1];else if(({value:h,matchLength:p}=this._parseLiteral(r)),null===h)return y(this);null===d&&0===p||(u="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(d=this._variable.exec(r))&&(u="var",h=d[0]);break;case"@":"literal"===this._previousMarker&&(d=this._langcode.exec(r))?(u="langcode",h=d[1]):(d=this._keyword.exec(r))&&(u=d[0]);break;case".":if(1===r.length?e:r[1]<"0"||r[1]>"9"){u=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(d=this._number.exec(r)||e&&(d=this._number.exec(r+" ")))&&(u="literal",h=d[0],c="string"==typeof d[1]?a.double:"string"==typeof d[2]?a.decimal:a.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(d=this._sparqlKeyword.exec(r))?u=d[0].toUpperCase():g=!0;break;case"f":case"t":(d=this._boolean.exec(r))?(u="literal",h=d[0],c=a.boolean):g=!0;break;case"a":(d=this._shortPredicates.exec(r))?(u="abbreviation",h="a"):g=!0;break;case"=":this._n3Mode&&r.length>1&&(u="abbreviation",">"!==r[1]?(p=1,h="="):(p=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(p=1,u=f);break;default:g=!0}if(g&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(d=this._prefix.exec(r))?((d=this._prefixed.exec(r))||e&&(d=this._prefixed.exec(r+" ")))&&(u="prefixed",c=d[1]||"",h=this._unescape(d[2])):(u="prefix",h=d[1]||"")),"^^"===this._previousMarker)switch(u){case"prefixed":u="type";break;case"IRI":u="typeIRI";break;default:u=""}if(!u)return e||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?y(this):this._input=r;var _={line:o,type:u,value:h,prefix:c};t(null,_),this.previousToken=_,this._previousMarker=u,r=r.substr(p||d[0].length,r.length)}function y(e){t(e._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(t){let e=!1;const r=t.replace(o,(t,r,n,i)=>{if("string"==typeof r)return String.fromCharCode(Number.parseInt(r,16));if("string"==typeof n){let t=Number.parseInt(n,16);return t<=65535?String.fromCharCode(Number.parseInt(n,16)):String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t))}return i in u?u[i]:(e=!0,"")});return e?null:r}_parseLiteral(t){if(t.length>=3){const e=t.match(/^(?:"""|"|'''|'|)/)[0],r=e.length;let n=Math.max(this._literalClosingPos,r);for(;(n=t.indexOf(e,n))>0;){let e=0;for(;"\\"===t[n-e-1];)e++;if(e%2==0){const e=t.substring(r,n),i=e.split(/\r\n|\r|\n/).length-1,s=n+r;if(1===r&&0!==i||3===r&&this._lineMode)break;return this._line+=i,{value:this._unescape(e),matchLength:s}}n++}this._literalClosingPos=t.length-r+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;var e=new Error('Unexpected "'+t+'" on line '+this._line+".");return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}tokenize(e,r){var n=this;if(this._line=1,"string"==typeof e){if(this._input=e,"function"!=typeof r){var i,a=[];if(this._tokenizeToEnd((function(t,e){t?i=t:a.push(e)}),!0),i)throw i;return a}s()(()=>n._tokenizeToEnd(r,!0))}else this._input="",this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(function(e){null!==n._input&&0!==e.length&&(n._pendingBuffer&&(e=t.concat([n._pendingBuffer,e]),n._pendingBuffer=null),128&e[e.length-1]?n._pendingBuffer=e:(n._input+=e,n._tokenizeToEnd(r,!1)))})),e.on("end",(function(){null!==n._input&&n._tokenizeToEnd(r,!0)})),e.on("error",r)}}}).call(this,r(7).Buffer)},function(t,e){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>(r||(r=Promise.resolve())).then(t).catch(t=>setTimeout(()=>{throw t},0))},function(t,e,r){(function(e){var r={},n=r.LEFT_BRACE=1,i=r.RIGHT_BRACE=2,s=r.LEFT_BRACKET=3,a=r.RIGHT_BRACKET=4,o=r.COLON=5,u=r.COMMA=6,l=r.TRUE=7,h=r.FALSE=8,c=r.NULL=9,f=r.STRING=10,d=r.NUMBER=11,p=r.START=17,g=r.STOP=18,_=r.TRUE1=33,y=r.TRUE2=34,b=r.TRUE3=35,w=r.FALSE1=49,v=r.FALSE2=50,E=r.FALSE3=51,m=r.FALSE4=52,x=r.NULL1=65,C=r.NULL2=66,R=r.NULL3=67,I=r.NUMBER1=81,S=r.NUMBER3=83,O=r.STRING1=97,T=r.STRING2=98,A=r.STRING3=99,N=r.STRING4=100,L=r.STRING5=101,k=r.STRING6=102,D=r.VALUE=113,P=r.KEY=114,j=r.OBJECT=129,V=r.ARRAY=130,U="\\".charCodeAt(0),M="/".charCodeAt(0),B="\b".charCodeAt(0),F="\f".charCodeAt(0),G="\n".charCodeAt(0),$="\r".charCodeAt(0),J="\t".charCodeAt(0);function K(){this.tState=p,this.value=void 0,this.string=void 0,this.stringBuffer=e.alloc?e.alloc(65536):new e(65536),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=D,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new e(2),3:new e(3),4:new e(4)},this.offset=-1}K.toknam=function(t){for(var e=Object.keys(r),n=0,i=e.length;n<i;n++){var s=e[n];if(r[s]===t)return s}return t&&"0x"+t.toString(16)};var q=K.prototype;q.onError=function(t){throw t},q.charError=function(t,e){this.tState=g,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+K.toknam(this.tState)))},q.appendStringChar=function(t){this.stringBufferOffset>=65536&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t},q.appendStringBuf=function(t,e,r){var n=t.length;"number"==typeof e&&(n="number"==typeof r?r<0?t.length-e+r:r-e:t.length-e),n<0&&(n=0),this.stringBufferOffset+n>65536&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n},q.write=function(t){var r;"string"==typeof t&&(t=new e(t));for(var g=0,D=t.length;g<D;g++)if(this.tState===p){if(r=t[g],this.offset++,123===r)this.onToken(n,"{");else if(125===r)this.onToken(i,"}");else if(91===r)this.onToken(s,"[");else if(93===r)this.onToken(a,"]");else if(58===r)this.onToken(o,":");else if(44===r)this.onToken(u,",");else if(116===r)this.tState=_;else if(102===r)this.tState=w;else if(110===r)this.tState=x;else if(34===r)this.string="",this.stringBufferOffset=0,this.tState=O;else if(45===r)this.string="-",this.tState=I;else if(r>=48&&r<64)this.string=String.fromCharCode(r),this.tState=S;else if(32!==r&&9!==r&&10!==r&&13!==r)return this.charError(t,g)}else if(this.tState===O)if(r=t[g],this.bytes_remaining>0){for(var P=0;P<this.bytes_remaining;P++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+P]=t[P];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,g=g+P-1}else if(0===this.bytes_remaining&&r>=128){if(r<=193||r>244)return this.onError(new Error("Invalid UTF-8 character at position "+g+" in state "+K.toknam(this.tState)));if(r>=194&&r<=223&&(this.bytes_in_sequence=2),r>=224&&r<=239&&(this.bytes_in_sequence=3),r>=240&&r<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+g>t.length){for(var j=0;j<=t.length-1-g;j++)this.temp_buffs[this.bytes_in_sequence][j]=t[g+j];this.bytes_remaining=g+this.bytes_in_sequence-t.length,g=t.length-1}else this.appendStringBuf(t,g,g+this.bytes_in_sequence),g=g+this.bytes_in_sequence-1}else if(34===r)this.tState=p,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(f,this.string),this.offset+=e.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===r)this.tState=T;else{if(!(r>=32))return this.charError(t,g);this.appendStringChar(r)}else if(this.tState===T)if(34===(r=t[g]))this.appendStringChar(r),this.tState=O;else if(92===r)this.appendStringChar(U),this.tState=O;else if(47===r)this.appendStringChar(M),this.tState=O;else if(98===r)this.appendStringChar(B),this.tState=O;else if(102===r)this.appendStringChar(F),this.tState=O;else if(110===r)this.appendStringChar(G),this.tState=O;else if(114===r)this.appendStringChar($),this.tState=O;else if(116===r)this.appendStringChar(J),this.tState=O;else{if(117!==r)return this.charError(t,g);this.unicode="",this.tState=A}else if(this.tState===A||this.tState===N||this.tState===L||this.tState===k){if(!((r=t[g])>=48&&r<64||r>64&&r<=70||r>96&&r<=102))return this.charError(t,g);if(this.unicode+=String.fromCharCode(r),this.tState++===k){var V=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&V>=56320&&V<57344?(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate,V))),this.highSurrogate=void 0):void 0===this.highSurrogate&&V>=55296&&V<56320?this.highSurrogate=V:(void 0!==this.highSurrogate&&(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new e(String.fromCharCode(V)))),this.tState=O}}else if(this.tState===I||this.tState===S)switch(r=t[g]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(r),this.tState=S;break;default:this.tState=p;var q=Number(this.string);if(isNaN(q))return this.charError(t,g);this.string.match(/[0-9]+/)==this.string&&q.toString()!=this.string?this.onToken(f,this.string):this.onToken(d,q),this.offset+=this.string.length-1,this.string=void 0,g--}else if(this.tState===_){if(114!==t[g])return this.charError(t,g);this.tState=y}else if(this.tState===y){if(117!==t[g])return this.charError(t,g);this.tState=b}else if(this.tState===b){if(101!==t[g])return this.charError(t,g);this.tState=p,this.onToken(l,!0),this.offset+=3}else if(this.tState===w){if(97!==t[g])return this.charError(t,g);this.tState=v}else if(this.tState===v){if(108!==t[g])return this.charError(t,g);this.tState=E}else if(this.tState===E){if(115!==t[g])return this.charError(t,g);this.tState=m}else if(this.tState===m){if(101!==t[g])return this.charError(t,g);this.tState=p,this.onToken(h,!1),this.offset+=4}else if(this.tState===x){if(117!==t[g])return this.charError(t,g);this.tState=C}else if(this.tState===C){if(108!==t[g])return this.charError(t,g);this.tState=R}else if(this.tState===R){if(108!==t[g])return this.charError(t,g);this.tState=p,this.onToken(c,null),this.offset+=3}},q.onToken=function(t,e){},q.parseError=function(t,e){this.tState=g,this.onError(new Error("Unexpected "+K.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+K.toknam(this.state)))},q.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},q.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=D)},q.emit=function(t){this.mode&&(this.state=u),this.onValue(t)},q.onValue=function(t){},q.onToken=function(t,e){if(this.state===D)if(t===f||t===d||t===l||t===h||t===c)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===n)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=P,this.mode=j;else if(t===s)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=V,this.state=D;else if(t===i){if(this.mode!==j)return this.parseError(t,e);this.pop()}else{if(t!==a)return this.parseError(t,e);if(this.mode!==V)return this.parseError(t,e);this.pop()}else if(this.state===P)if(t===f)this.key=e,this.state=o;else{if(t!==i)return this.parseError(t,e);this.pop()}else if(this.state===o){if(t!==o)return this.parseError(t,e);this.state=D}else{if(this.state!==u)return this.parseError(t,e);if(t===u)this.mode===V?(this.key++,this.state=D):this.mode===j&&(this.state=P);else{if(!(t===a&&this.mode===V||t===i&&this.mode===j))return this.parseError(t,e);this.pop()}}},K.C=r,t.exports=K}).call(this,r(7).Buffer)},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),a=n[0],o=n[1],u=new s(function(t,e,r){return 3*(e+r)/4-r}(0,a,o)),h=0,c=o>0?a-4:a;for(r=0;r<c;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===o&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[h++]=255&e);1===o&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],a=0,o=r-i;a<o;a+=16383)s.push(h(t,a,a+16383>o?o:a+16383));1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=a.length;o<u;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var i,s,a=[],o=e;o<r;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,l=u>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=t[e+c];for(c+=f,s=d&(1<<-h)-1,d>>=-h,h+=o;h>0;s=256*s+t[e+c],c+=f,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=n;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),s-=l}return(d?-1:1)*a*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var a,o,u,l=8*s-i-1,h=(1<<l)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=h?(o=0,a=h):a+c>=1?(o=(e*u-1)*Math.pow(2,i),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&o,d+=p,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;t[r+d]=255&a,d+=p,a/=256,l-=8);t[r+d-p]|=128*g}},function(t,e,r){"use strict";r.r(e),r.d(e,"Headers",(function(){return d})),r.d(e,"Request",(function(){return v})),r.d(e,"Response",(function(){return m})),r.d(e,"DOMException",(function(){return C})),r.d(e,"fetch",(function(){return R}));var n="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,s="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),a="FormData"in self,o="ArrayBuffer"in self;if(o)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function g(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function _(t){var e=new FileReader,r=g(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&s&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var t,e,r,n=p(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=g(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),f(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),f(t)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},b.call(v.prototype),b.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})};var C=self.DOMException;try{new C}catch(t){(C=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C}function R(t,e){return new Promise((function(r,n){var i=new v(t,e);if(i.signal&&i.signal.aborted)return n(new C("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new m(i,n))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.onabort=function(){n(new C("Aborted","AbortError"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&s&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",o)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}R.polyfill=!0,self.fetch||(self.fetch=R,self.Headers=d,self.Request=v,self.Response=m)},function(t,e,r){"use strict";function n(t){const e=[];let r=0;for(;r<t.length;)switch(t[r]){case"/":if("."===t[r+1])if("."===t[r+2]){if(!s(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!s(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++}return"/"+e.map(t=>t.join("")).join("/")}function i(t,e){let r=e+1;e>=0?"/"===t[e+1]&&"/"===t[e+2]&&(r=e+3):"/"===t[0]&&"/"===t[1]&&(r=2);const i=t.indexOf("/",r);if(i<0)return t;return t.substr(0,i)+n(t.substr(i))}function s(t){return!t||"#"===t||"?"===t||"/"===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=function(t,e){const r=(e=e||"").indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);return e}if(t.startsWith("?")){const r=e.indexOf("?");return r>0&&(e=e.substr(0,r)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){const e=t.indexOf(":");if(e<0)throw new Error(`Found invalid relative IRI '${t}' for a missing baseIRI`);return i(t,e)}const s=t.indexOf(":");if(s>=0)return i(t,s);const a=e.indexOf(":");if(a<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);const o=e.substr(0,a+1);if(0===t.indexOf("//"))return o+i(t,s);let u;if(e.indexOf("//",a)===a+1){if(u=e.indexOf("/",a+3),u<0)return e.length>a+3?e+"/"+i(t,s):o+i(t,s)}else if(u=e.indexOf("/",a+1),u<0)return o+i(t,s);if(0===t.indexOf("/"))return e.substr(0,u)+n(t);let l=e.substr(u);const h=l.lastIndexOf("/");return h>=0&&h<l.length-1&&(l=l.substr(0,h+1),"."===t[0]&&"."!==t[1]&&"/"!==t[1]&&t[2]&&(t=t.substr(1))),t=n(t=l+t),e.substr(0,u)+t},e.removeDotSegments=n,e.removeDotSegmentsOfPath=i},function(t,e){},function(t,e,r){"use strict";var n=r(12).Buffer,i=r(48);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,s=n.allocUnsafe(t>>>0),a=this.head,o=0;a;)e=a.data,r=s,i=o,e.copy(r,i),o+=a.data.length,a=a.next;return s},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new s(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new s(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(50),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(5))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,s,a,o,u=1,l={},h=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){s.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[u]=i,n(u),u++},f.clearImmediate=d}function d(t){delete l[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=l[t];if(e){h=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{d(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(5),r(10))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(5))},function(t,e,r){"use strict";t.exports=s;var n=r(32),i=Object.create(r(9));function s(t){if(!(this instanceof s))return new s(t);n.call(this,t)}i.inherits=r(6),i.inherits(s,n),s.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(18)},function(t,e,r){t.exports=r(2)},function(t,e,r){t.exports=r(17).Transform},function(t,e,r){t.exports=r(17).PassThrough},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3);e.EntryHandlerArrayValue=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,n,i){return this.test(t,e,null,r,n)}async test(t,e,r,n,i){return"number"==typeof n[i]}async handle(t,e,r,i,s,a){let o=await e.unaliasKeywordParent(i,a);if("@list"===o){let r=null,n=0;for(let t=a-2;t>0;t--){const e=i[t];if("string"==typeof e||"number"==typeof e){n=t,r=e;break}}if(null!==r){const o=await e.valueToTerm(await t.getContext(i),r,s,a,i);for(const r of o)await this.handleListElement(t,e,r,s,a,i.slice(0,n),n);0===o.length&&await this.handleListElement(t,e,null,s,a,i.slice(0,n),n)}}else if("@set"===o)await t.newOnValueJob(i.slice(0,-2),s,a-2,!1);else if(void 0!==o&&"@type"!==o){for(let t=a-1;t>0;t--)if("number"!=typeof i[t]){o=await e.unaliasKeyword(i[t],i,t);break}const r=await t.getContext(i.slice(0,-1));if("@list"in n.Util.getContextValueContainer(r,o)){const r=await e.valueToTerm(await t.getContext(i),o,s,a,i);for(const n of r)await this.handleListElement(t,e,n,s,a,i.slice(0,-1),a-1);0===r.length&&await this.handleListElement(t,e,null,s,a,i.slice(0,-1),a-1)}else t.shiftStack(a,1),await t.newOnValueJob(i.slice(0,-1),s,a-1,!1),t.contextTree.removeContext(i.slice(0,-1))}}async handleListElement(t,e,r,n,i,s,a){let o=t.listPointerStack[i];if(null!==n&&null!==(await e.unaliasKeywords(n,s,i))["@value"]){if(o&&o.value){const r=e.dataFactory.blankNode();t.emitQuad(i,e.dataFactory.quad(o.value,e.rdfRest,r,e.getDefaultGraph())),o.value=r}else{const t=e.dataFactory.blankNode();o={value:t,listRootDepth:a,listId:t}}r&&t.emitQuad(i,e.dataFactory.quad(o.value,e.rdfFirst,r,e.getDefaultGraph()))}else o||(o={listRootDepth:a,listId:e.rdfNil});t.listPointerStack[i]=o}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ContainerHandlerIdentifier=class{canCombineWithGraph(){return!0}async handle(t,e,r,n,i,s){let a;if(e.emittedStack[s+1]&&e.idStack[s+1])a=e.idStack[s+1][0];else{const t=null!==await r.getContainerKey(n[s],n,s)?await r.resourceToTerm(await e.getContext(n),n[s]):r.dataFactory.blankNode();if(!t)return void(e.emittedStack[s]=!1);a=t,e.idStack[s+1]=[a]}let o=e.idStack[s];o||(o=e.idStack[s]=[]),o.some(t=>t.equals(a))||o.push(a),await e.handlePendingContainerFlushBuffers()||(e.emittedStack[s]=!1)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(13),s=r(3);e.ContainerHandlerIndex=class{canCombineWithGraph(){return!0}async handle(t,e,r,a,o,u){if(!Array.isArray(o)){const l="@graph"in t,h=await e.getContext(a),c=a[u-1],f=s.Util.getContextValueIndex(h,c);if(f){if(n.Util.isPotentialKeyword(f))throw new n.ErrorCoded("Keywords can not be used as @index value, got: "+f,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("string"!=typeof f)throw new n.ErrorCoded("@index values must be strings, got: "+f,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("object"!=typeof o){if("@id"!==s.Util.getContextValueType(h,c))throw new n.ErrorCoded("Property-based index containers require nodes as values or strings with @type: @id, but got: "+o,n.ERROR_CODES.INVALID_VALUE_OBJECT);const t=r.resourceToTerm(h,o);t&&(e.idStack[u+1]=[t])}const t=r.createVocabOrBaseTerm(h,f);if(t){const n=await r.valueToTerm(h,f,await r.getContainerKey(a[u],a,u),u,a);if(l){const i=await r.getGraphContainerValue(a,u+1);for(const s of n)e.emitQuad(u,r.dataFactory.quad(i,t,s,r.getDefaultGraph()))}else for(const s of n)await i.EntryHandlerPredicate.handlePredicateObject(e,r,a,u+1,t,s,!1)}}const d=l?2:1;await e.newOnValueJob(a.slice(0,a.length-d),o,u-d,!0),await e.handlePendingContainerFlushBuffers()}e.emittedStack[u]=!1}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1);e.ContainerHandlerLanguage=class{canCombineWithGraph(){return!1}async handle(t,e,r,i,s,a){const o=await r.getContainerKey(i[a],i,a);if(Array.isArray(s))s=s.map(t=>({"@value":t,"@language":o}));else{if("string"!=typeof s)throw new n.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(s)}', but expected string`,n.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);s={"@value":s,"@language":o}}await e.newOnValueJob(i.slice(0,i.length-1),s,a-1,!0),e.emittedStack[a]=!1}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(13),i=r(3);e.ContainerHandlerType=class{canCombineWithGraph(){return!1}async handle(t,e,r,s,a,o){if(!Array.isArray(a)){if("string"==typeof a){const t=await e.getContext(s),n="@vocab"===i.Util.getContextValueType(t,s[o-1])?await r.createVocabOrBaseTerm(t,a):await r.resourceToTerm(t,a);if(n){const t={"@id":"NamedNode"===n.termType?n.value:a};await e.newOnValueJob(s.slice(0,s.length-1),t,o-1,!0),e.idStack[o+1]=[n]}}else{const t=!!e.idStack[o+1];t||delete e.idStack[o],await e.newOnValueJob(s.slice(0,s.length-1),a,o-1,!0),t||(e.idStack[o+1]=e.idStack[o])}const t=await r.getContainerKey(s[o],s,o),u=null!==t?r.createVocabOrBaseTerm(await e.getContext(s),t):null;u&&await n.EntryHandlerPredicate.handlePredicateObject(e,r,s,o+1,r.rdfType,u,!1),await e.handlePendingContainerFlushBuffers()}e.emittedStack[o]=!1}}},function(t,e,r){var n=r(63),i=r(35),s=r(64),a=r(36),o=r(65),u=r(66);function l(){}l.namedNode=function(t){return new a(t)},l.blankNode=function(t){return new n(t)},l.literal=function(t,e){return"string"==typeof e?-1===e.indexOf(":")?new s(t,e):new s(t,null,l.namedNode(e)):new s(t,null,e)},l.defaultGraph=function(){return l.defaultGraphInstance},l.variable=function(t){return new u(t)},l.triple=function(t,e,r){return l.quad(t,e,r)},l.quad=function(t,e,r,n){return new o(t,e,r,n||l.defaultGraphInstance)},l.defaultGraphInstance=new i,t.exports=l},function(t,e){function r(t){this.value=t||"b"+ ++r.nextId}r.prototype.equals=function(t){return!!t&&t.termType===this.termType&&t.value===this.value},r.prototype.termType="BlankNode",r.nextId=0,t.exports=r},function(t,e,r){var n=r(36);function i(t,e,r){this.value=t,this.datatype=i.stringDatatype,this.language="",e?(this.language=e,this.datatype=i.langStringDatatype):r&&(this.datatype=r)}i.prototype.equals=function(t){return!!t&&t.termType===this.termType&&t.value===this.value&&t.language===this.language&&t.datatype.equals(this.datatype)},i.prototype.termType="Literal",i.langStringDatatype=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.stringDatatype=new n("http://www.w3.org/2001/XMLSchema#string"),t.exports=i},function(t,e,r){var n=r(35);function i(t,e,r,i){this.subject=t,this.predicate=e,this.object=r,this.graph=i||new n}i.prototype.equals=function(t){return!!t&&t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)},t.exports=i},function(t,e){function r(t){this.value=t}r.prototype.equals=function(t){return!!t&&t.termType===this.termType&&t.value===this.value},r.prototype.termType="Variable",t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EntryHandlerInvalidFallback=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,n,i){return!1}async test(t,e,r,n,i){return!0}async handle(t,e,r,n,i,s){t.emittedStack[s]=!1}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(4);class s extends i.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(t,e,r,i,s,a){t.streamingProfile&&(t.processingStack[a]||t.processingType[a]||void 0!==t.idStack[a])&&t.emitError(new n.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const o=t.getContext(i),u=t.parseContext(s,(await o).getContextRaw());t.contextTree.setContext(i.slice(0,-1),u),t.emitContext(s),await t.validateContext(await u)}}e.EntryHandlerKeywordContext=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);class i extends n.EntryHandlerKeyword{constructor(){super("@graph")}async handle(t,e,r,n,i,s){t.graphStack[s+1]=!0}}e.EntryHandlerKeywordGraph=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(4);class s extends i.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(t,e,r,i,s,a){"string"!=typeof s&&t.emitError(new n.ErrorCoded(`Found illegal @id '${s}'`,n.ERROR_CODES.INVALID_ID_VALUE));const o=await e.getPropertiesDepth(i,a);void 0!==t.idStack[o]&&(t.idStack[o][0].listHead?t.emitError(new n.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${i[a-1]}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):t.emitError(new n.ErrorCoded(`Found duplicate @ids '${t.idStack[o][0].value}' and '${s}'`,n.ERROR_CODES.COLLIDING_KEYWORDS))),t.idStack[o]=e.nullableTermToArray(await e.resourceToTerm(await t.getContext(i),s))}}e.EntryHandlerKeywordId=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(4);class s extends i.EntryHandlerKeyword{constructor(){super("@included")}async handle(t,e,r,i,s,a){"object"!=typeof s&&t.emitError(new n.ErrorCoded(`Found illegal @included '${s}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE));const o=await e.unaliasKeywords(s,i,a,await t.getContext(i));"@value"in o&&t.emitError(new n.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(s)}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in o&&t.emitError(new n.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(s)}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.emittedStack[a]=!1}}e.EntryHandlerKeywordIncluded=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(4);class s extends i.EntryHandlerKeyword{constructor(){super("@nest")}async handle(t,e,r,i,s,a){"object"!=typeof s&&t.emitError(new n.ErrorCoded(`Found invalid @nest entry for '${r}': '${s}'`,n.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await e.unaliasKeywords(s,i,a,await t.getContext(i))&&t.emitError(new n.ErrorCoded(`Found an invalid @value node for '${r}'`,n.ERROR_CODES.INVALID_NEST_VALUE)),t.emittedStack[a]=!1}}e.EntryHandlerKeywordNest=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(3),s=r(13),a=r(4);class o extends a.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(t,e,r,a,o,u){const l=a[u],h=await t.getContext(a),c=e.rdfType,f=i.Util.isPropertyReverse(h,l,await e.unaliasKeywordParent(a,u)),d=Array.isArray(o)?o:[o];for(const r of d){"string"!=typeof r&&t.emitError(new n.ErrorCoded(`Found illegal @type '${r}'`,n.ERROR_CODES.INVALID_TYPE_VALUE));const i=e.createVocabOrBaseTerm(h,r);i&&await s.EntryHandlerPredicate.handlePredicateObject(t,e,a,u,c,i,f)}let p=Promise.resolve(h),g=!1;for(const e of d.sort()){const r=i.Util.getContextValue(h,"@context",e,null);r&&(g=!0,p=p.then(e=>t.parseContext(r,e.getContextRaw())))}!t.streamingProfile||!g&&t.streamingProfileAllowOutOfOrderPlainType||!t.processingStack[u]&&!t.idStack[u]||t.emitError(new n.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),g&&(p=p.then(t=>("@propagate"in t.getContextRaw()||(t.getContextRaw()["@propagate"]=!1),!1===t.getContextRaw()["@propagate"]&&(t.getContextRaw()["@__propagateFallback"]=h.getContextRaw()),t)),t.contextTree.setContext(a.slice(0,a.length-1),p)),t.processingType[u]=!0}}e.EntryHandlerKeywordType=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1);class i{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,i,s){const a=await e.unaliasKeyword(r[i],r,i);return!!n.Util.isPotentialKeyword(a)&&!(!s&&"@list"===a)}async test(t,e,r,i,s){return n.Util.isPotentialKeyword(r)}async handle(t,e,r,s,a,o){const u=i.VALID_KEYWORDS_TYPES[r];void 0!==u?u&&typeof a!==u.type&&t.emitError(new n.ErrorCoded(`Invalid value type for '${r}' with value '${a}'`,u.errorCode)):t.strictValues&&t.emitError(new Error(`Unknown keyword '${r}' with value '${a}'`)),t.emittedStack[o]=!1}}e.EntryHandlerKeywordUnknownFallback=i,i.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:n.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:n.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4);class i extends n.EntryHandlerKeyword{constructor(){super("@value")}async test(t,e,r,n,i){return"@value"===await e.unaliasKeyword(n[i],n.slice(0,n.length-1),i-1,!0)}async handle(t,e,r,n,i,s){t.literalStack[s]=!0,delete t.unidentifiedValuesBuffer[s],delete t.unidentifiedGraphsBuffer[s],t.emittedStack[s]=!1}}e.EntryHandlerKeywordValue=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1),i=r(8),s=r(77),a=r(20);class o{constructor(t){this.contextParser=new n.ContextParser({documentLoader:t.documentLoader}),this.streamingProfile=!!t.streamingProfile,this.baseIRI=t.baseIRI,this.produceGeneralizedRdf=!!t.produceGeneralizedRdf,this.allowSubjectList=!!t.allowSubjectList,this.processingMode=t.processingMode||a.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!t.strictValues,this.validateValueIndexes=!!t.validateValueIndexes,this.defaultGraph=t.defaultGraph,this.rdfDirection=t.rdfDirection,this.normalizeLanguageTags=t.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=t.streamingProfileAllowOutOfOrderPlainType,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new s.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=t.parser,t.context?(this.rootContext=this.parseContext(t.context),this.rootContext.then(t=>this.validateContext(t))):this.rootContext=Promise.resolve(new n.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(t,e,r){return this.contextParser.parse(t,{baseIRI:this.baseIRI,ignoreProtection:r,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:e,processingMode:this.activeProcessingMode})}validateContext(t){const e=t.getContextRaw()["@version"];if(e){if(this.activeProcessingMode&&e>this.activeProcessingMode)throw new i.ErrorCoded(`Unsupported JSON-LD version '${e}' under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&e<this.activeProcessingMode)throw new i.ErrorCoded(`Invalid JSON-LD version ${e} under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=e}}async getContext(t,e=1){const r=t;for(;"number"==typeof t[t.length-1];)t=t.slice(0,t.length-1);e&&(t=t.slice(0,-e));const i=await this.getContextPropagationAware(t);let s=i.context.getContextRaw();for(let t=i.depth;t<r.length-e;t++){const i=r[t],a=s[i];if(a&&"object"==typeof a&&"@context"in a){const o=(await this.parseContext(a,s,!0)).getContextRaw(),u=!(i in o)||o[i]["@context"]["@propagate"];!1===u&&t!==r.length-1-e||(s=o,delete s["@propagate"],s[i]=Object.assign({},s[i]),"@id"in a&&(s[i]["@id"]=a["@id"]),delete s[i]["@context"],!1!==u&&this.contextTree.setContext(r.slice(0,t+e),Promise.resolve(new n.JsonLdContextNormalized(s))))}}return new n.JsonLdContextNormalized(s)}async getContextPropagationAware(t){const e=t.length;let r,i=null;do{r=!1,i&&"@__propagateFallback"in i.context.getContextRaw()?i.context=new n.JsonLdContextNormalized(i.context.getContextRaw()["@__propagateFallback"]):(i&&(t=t.slice(0,i.depth-1)),i=await this.contextTree.getContext(t)||{context:await this.rootContext,depth:0});const e=t[t.length-1];if(e in i.context.getContextRaw()){const t=i.context.getContextRaw()[e];t&&"object"==typeof t&&"@context"in t&&(r=!0)}}while(i.depth>0&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==e&&!r);return 0===i.depth&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==e&&(i.context=new n.JsonLdContextNormalized({})),i}async newOnValueJob(t,e,r,n){await this.parser.newOnValueJob(t,e,r,n)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const t of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(t.depth,t.keys),this.parser.flushStacks(t.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}return!1}emitQuad(t,e){1===t&&(this.topLevelProperties=!0),this.parser.push(e)}emitError(t){this.parser.emit("error",t)}emitContext(t){this.parser.emit("context",t)}getUnidentifiedValueBufferSafe(t){let e=this.unidentifiedValuesBuffer[t];return e||(e=[],this.unidentifiedValuesBuffer[t]=e),e}getUnidentifiedGraphBufferSafe(t){let e=this.unidentifiedGraphsBuffer[t];return e||(e=[],this.unidentifiedGraphsBuffer[t]=e),e}getExpandOptions(){return o.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(t,e){const r=this.idStack[t+e];if(r&&(this.idStack[t]=r,this.emittedStack[t]=!0,delete this.idStack[t+e]),this.pendingContainerFlushBuffers.length)for(const r of this.pendingContainerFlushBuffers)r.depth>=t+e&&(r.depth-=e,r.keys.splice(t,e));this.unidentifiedValuesBuffer[t+e]&&(this.unidentifiedValuesBuffer[t]=this.unidentifiedValuesBuffer[t+e],delete this.unidentifiedValuesBuffer[t+e])}}e.ParsingContext=o,o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.subTrees={}}getContext(t){if(t.length>0){const[e,...r]=t,n=this.subTrees[e];if(n){const t=n.getContext(r);if(t)return t.then(({context:t,depth:e})=>({context:t,depth:e+1}))}}return this.context?this.context.then(t=>({context:t,depth:0})):null}setContext(t,e){if(0===t.length)this.context=e;else{const[r,...i]=t;let s=this.subTrees[r];s||(s=this.subTrees[r]=new n),s.setContext(i,e)}}removeContext(t){this.setContext(t,null)}}e.ContextTree=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(34);function i(t){if(t)switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return"_:"+t.value;case"Literal":const e=t;return'"'+e.value+'"'+(e.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==e.datatype.value?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Variable":return"?"+t.value;case"DefaultGraph":return t.value}}function s(t){const e=/^"([^]*)"/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]}function a(t){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function o(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]?e[1].toLowerCase():""}function u(t,e){if(e=e||n,!t||!t.length)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.substr(1));case'"':const r=o(t),n=e.namedNode(a(t));return e.literal(s(t),r||n);default:return e.namedNode(t)}}e.termToString=i,e.getLiteralValue=s,e.getLiteralType=a,e.getLiteralLanguage=o,e.stringToTerm=u,e.quadToStringQuad=function(t){return{subject:i(t.subject),predicate:i(t.predicate),object:i(t.object),graph:i(t.graph)}},e.stringQuadToQuad=function(t,e){return(e=e||n).quad(u(t.subject,e),u(t.predicate,e),u(t.object,e),u(t.graph,e))}},function(t,e,r){"use strict";r.r(e);var n=r(37),i=r(39),s=r(0);const{rdf:a,xsd:o}=s.a;let u,l=0;const h={namedNode:function(t){return new d(t)},blankNode:function(t){return new g(t||"n3-"+l++)},variable:function(t){return new _(t)},literal:function(t,e){if("string"==typeof e)return new p('"'+t+'"@'+e.toLowerCase());let r=e?e.value:"";""===r&&("boolean"==typeof t?r=o.boolean:"number"==typeof t&&(Number.isFinite(t)?r=Number.isInteger(t)?o.integer:o.double:(r=o.double,Number.isNaN(t)||(t=t>0?"INF":"-INF"))));return""===r||r===o.string?new p('"'+t+'"'):new p('"'+t+'"^^'+r)},defaultGraph:function(){return u},quad:b,triple:b};var c=h;class f{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof f?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}toJSON(){return{termType:this.termType,value:this.value}}}class d extends f{get termType(){return"NamedNode"}}class p extends f{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){var t=this.id,e=t.lastIndexOf('"')+1;return e<t.length&&"@"===t[e++]?t.substr(e).toLowerCase():""}get datatype(){return new d(this.datatypeString)}get datatypeString(){var t,e=this.id,r=e.lastIndexOf('"')+1;return r<e.length&&"^"===(t=e[r])?e.substr(r+2):"@"!==t?o.string:a.langString}equals(t){return t instanceof p?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class g extends f{constructor(t){super("_:"+t)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class _ extends f{constructor(t){super("?"+t)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}u=new class extends f{constructor(){return super(""),u||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};class y{constructor(t,e,r,n){this.subject=t,this.predicate=e,this.object=r,this.graph=n||u}toJSON(){return{subject:this.subject.toJSON(),predicate:this.predicate.toJSON(),object:this.object.toJSON(),graph:this.graph.toJSON()}}equals(t){return!!t&&this.subject.equals(t.subject)&&this.predicate.equals(t.predicate)&&this.object.equals(t.object)&&this.graph.equals(t.graph)}}function b(t,e,r,n){return new y(t,e,r,n)}let w=0;class v{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&m(this,t.factory);var e="string"==typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",r="turtle"===e,n="trig"===e,s=/triple/.test(e),a=/quad/.test(e),o=this._n3Mode=/n3/.test(e),u=s||a;(this._supportsNamedGraphs=!(r||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||n||s||o),u&&(this._resolveRelativeIRI=function(t){return null}),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new i.a({lineMode:u,n3:o}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){w=0}_setBase(t){if(t){var e=t.indexOf("#");e>=0&&(t=t.substr(0,e)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}else this._base="",this._basePath=""}_saveContext(t,e,r,n,i){var s=this._n3Mode;this._contextStack.push({subject:r,predicate:n,object:i,graph:e,type:t,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?this._graph.id.substr(2)+".":".",this._quantified=Object.create(this._quantified))}_restoreContext(){var t=this._contextStack.pop(),e=this._n3Mode;this._subject=t.subject,this._predicate=t.predicate,this._object=t.object,this._graph=t.graph,e&&(this._inversePredicate=t.inverse,this._prefixes._=t.blankPrefix,this._quantified=t.quantified)}_readInTopContext(t){switch(t.type){case"eof":return null!==this._graph?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,e){var r;switch(t.type){case"IRI":case"typeIRI":var n=this._resolveIRI(t.value);if(null===n)return this._error("Invalid IRI",t);r=this._namedNode(n);break;case"type":case"prefixed":var i=this._prefixes[t.prefix];if(void 0===i)return this._error('Undefined prefix "'+t.prefix+':"',t);r=this._namedNode(i+t.value);break;case"blank":r=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":r=this._variable(t.value.substr(1));break;default:return this._error("Expected entity but got "+t.type,t)}return!e&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(0===t.prefix.length)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;default:if(void 0===(this._subject=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){var e=t.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+e,t):(this._subject=null,"]"===e?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",t);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if(void 0===(this._predicate=this._readEntity(t)))return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(0===t.prefix.length)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if(void 0===(this._object=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return"{"===t.type?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return"{"!==t.type?this._error("Expected graph but got "+t.type,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return"]"===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if("]"!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);var e=null===this._predicate;return this._restoreContext(),null===this._object?e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){var e=null,r=null,n=this._subject,i=this._contextStack,s=i[i.length-1],a=this._readListItem;switch(t.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==i.length&&"list"===i[i.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;r=this.RDF_NIL;break;case"literal":0===t.prefix.length?(this._literalValue=t.value,a=this._readListItemDataTypeOrLang):(e=this._literal(t.value,this._namedNode(t.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if(void 0===(e=this._readEntity(t)))return}if(null===r&&(this._subject=r=this._blankNode()),null===n?null===s.predicate?s.subject=r:s.object=r:this._emit(n,this.RDF_REST,r,this._graph),null!==e){if(this._n3Mode&&("IRI"===t.type||"prefixed"===t.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,e,this._graph)}return a}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let e=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":var r=this._readEntity(t);if(void 0===r)return;e=this._literal(this._literalValue,r),t=null;break;case"langcode":e=this._literal(this._literalValue,t.value),t=null}return{token:t,literal:e}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,e){const r=this._completeLiteral(t);if(r)return this._object=r.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(t){return"}"!==t.type?this._readPunctuation(t):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){var e,r=this._subject,n=this._graph,i=this._inversePredicate;switch(t.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(t))){e=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object.id+'"',t)}if(null!==r){var s=this._predicate,a=this._object;i?this._emit(a,s,r,n):this._emit(r,s,a,n)}return e}_readBlankNodePunctuation(t){var e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object.id+'"',t)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(t){return"."!==t.type?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return"prefix"!==t.type?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if("IRI"!==t.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',t);var e=this._readEntity(t);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(t){var e="IRI"===t.type&&this._resolveIRI(t.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return"]"!==t.type?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):"."!==t.type?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){var e;switch(t.type){case"IRI":case"prefixed":if(void 0!==(e=this._readEntity(t,!0)))break;default:return this._error("Unexpected "+t.type,t)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return","===t.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var e=this._contextStack,r=e.length&&e[e.length-1];if(r&&"item"===r.type){var n=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,n,this._graph)}return this._afterPath(t)}}_readForwardPath(t){var e,r,n=this._blankNode();if(void 0!==(r=this._readEntity(t)))return null===this._predicate?(e=this._subject,this._subject=n):(e=this._object,this._object=n),this._emit(e,r,n,this._graph),this._readPath}_readBackwardPath(t){var e,r,n=this._blankNode();if(void 0!==(e=this._readEntity(t)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,e,r,this._graph),this._readPath}_getContextEndReader(){var t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}}_emit(t,e,r,n){this._callback(null,this._quad(t,e,r,n||this.DEFAULTGRAPH))}_error(t,e){var r=new Error(t+" on line "+e.line+".");r.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=E}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;for(var e="",r=t.length,n=-1,i=-1,s=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===t[++n]&&"/"===t[++n])for(;(i=n+1)<r&&"/"!==t[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===t[n+1])switch(a=t[1+ ++n]){case"/":e+=t.substring(s,n-1),s=n+1;break;case void 0:case"?":case"#":return e+t.substring(s,n)+t.substr(n+1);case".":if(void 0===(a=t[1+ ++n])||"/"===a||"?"===a||"#"===a){if((s=(e+=t.substring(s,n-2)).lastIndexOf("/"))>=i&&(e=e.substr(0,s)),"/"!==a)return e+"/"+t.substr(n+1);s=n+1}}}a=t[++n]}return e+t.substring(s)}parse(t,e,r){var n=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):"b"+w+++"_",this._prefixCallback=r||E,this._inversePredicate=!1,this._quantified=Object.create(null),!e){var i,s=[];if(this._callback=function(t,e){t?i=t:e&&s.push(e)},this._lexer.tokenize(t).every((function(t){return n._readCallback=n._readCallback(t)})),i)throw i;return s}this._callback=e,this._lexer.tokenize(t,(function(t,e){null!==t?(n._callback(t),n._callback=E):n._readCallback&&(n._readCallback=n._readCallback(e))}))}}function E(){}function m(t,e){var r=e.namedNode;t._namedNode=r,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=r(s.a.rdf.first),t.RDF_REST=r(s.a.rdf.rest),t.RDF_NIL=r(s.a.rdf.nil),t.N3_FORALL=r(s.a.r.forAll),t.N3_FORSOME=r(s.a.r.forSome),t.ABBREVIATIONS={a:r(s.a.rdf.type),"=":r(s.a.owl.sameAs),">":r(s.a.log.implies)},t.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}m(v.prototype,c);var x=r(19);class C extends x.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;var e,r,n=this;new v(t).parse({on:function(t,n){switch(t){case"data":e=n;break;case"end":r=n}}},(function(t,e){t&&n.emit("error",t)||e&&n.push(e)}),(function(t,e){n.emit("prefix",t,e)})),this._transform=function(t,r,n){e(t),n()},this._flush=function(t){r(),t()}}import(t){var e=this;return t.on("data",(function(t){e.write(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.emit("error",t)})),this}}var R=r(38);self.addEventListener("message",async t=>{const e=await fetch(t.data.url,{headers:t.data.headers||[]});if(e.ok){const t=e.headers.get("Content-Type");let r=null,i=null;if(t.includes("application/ld+json")?(r=new n.JsonLdParser,i=JSON.stringify(await e.json(),null,3).split("\n")):t.includes("application/n-quads")&&(r=new C({format:"N-Quads"}),i=await e.text()),r.on("data",t=>{self.postMessage(Object(R.quadToStringQuad)(t))}).on("error",console.error).on("end",()=>{self.postMessage("done")}),Array.isArray(i))for(const t of i)r.write(t);else r.write(i);r.end()}else self.postMessage("done")})}]);